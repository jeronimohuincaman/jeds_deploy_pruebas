{"version":3,"file":"src_app_modules_stock_entregas-qr_entregas-qr_module_ts.js","mappings":"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","sources":["./src/app/modules/stock/entregas-qr/components/entregas-qr.component.ts","./src/app/modules/stock/entregas-qr/components/entregas-qr.component.html","./src/app/modules/stock/entregas-qr/components/save/save.component.ts","./src/app/modules/stock/entregas-qr/components/save/save.component.html","./src/app/modules/stock/entregas-qr/entregas-qr.module.ts","./src/app/modules/stock/entregas-qr/service/entregas-qr.service.ts"],"sourcesContent":["import { Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { Observable, Subject, firstValueFrom, map, startWith, takeUntil } from 'rxjs';\r\nimport { MatTableDataSource } from '@angular/material/table'\r\nimport { FuseConfirmationService } from '@fuse/services/confirmation';\r\nimport { AppAlertService } from '@shared/service/app/alert.service';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { TablaDinamicaComponent } from '@shared/components/tabla-dinamica/tabla-dinamica.component';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { SearchService } from 'app/layout/common/search/search.service';\r\nimport { JedsMenuService } from '@shared/service/app/jeds-menu.service';\r\nimport { HeaderTextService } from '@shared/components/header-text/header-text.service';\r\nimport { Router } from '@angular/router';\r\nimport { EmpresaService } from '@shared/service/app/empresa.service';\r\nimport { PwaService } from '@shared/service/app/pwa.service';\r\nimport { LectorQrComponent } from '@shared/components/lector-qr/lector-qr.component';\r\nimport { EntregasQRService } from '../service/entregas-qr.service';\r\nimport { IEntregaQR } from '../models/entrega-qr';\r\nimport { IDeposito } from '../../depositos/models/deposito';\r\nimport { SaveComponent } from './save/save.component';\r\nimport { IUsuario } from '@core/user/user.types';\r\nimport { DatePipe } from '@angular/common';\r\n\r\n@Component({\r\n    selector: 'app-entregas-qr',\r\n    templateUrl: './entregas-qr.component.html',\r\n    styleUrls: ['./entregas-qr.component.scss']\r\n})\r\nexport class EntregasQRComponent implements OnInit, OnDestroy {\r\n    form: FormGroup;\r\n    columns = ['codigo_interno', 'articulo', 'unidadmedida', 'cantidad'];\r\n    public dataSource: MatTableDataSource<any> = new MatTableDataSource();\r\n    user: any;\r\n    entrega: IEntregaQR;\r\n    depositos: IDeposito[] = [];\r\n    mov_art_list: any[] = [];\r\n    usuarios: IUsuario[] = [];\r\n    filteredDepositos: Observable<IDeposito[]>;\r\n    color_primario: string;\r\n    color_secundario: string;\r\n    default_color: string = 'bg-primary';\r\n    private _unsubscribeAll: Subject<any> = new Subject<any>();\r\n    idUsuario: number;\r\n    nombre: string = '';\r\n    apellido: string = '';\r\n    orden_servicio: number;\r\n    mostrarTextoCredencial: boolean = true;\r\n    mostrarTextoOrdenServicio: boolean = true;\r\n    buttonStyleCredencial: string = 'default';\r\n    buttonStyleOrdenServicio: string = 'default';\r\n    credencialScaneada = false;\r\n    ordenServicioScaneada = false;\r\n    deposito_default = 0;\r\n\r\n    constructor(\r\n        private _entregasQRService: EntregasQRService,\r\n        private _empresaService: EmpresaService,\r\n        private confirm: FuseConfirmationService,\r\n        private alert: AppAlertService,\r\n        private dialogo: MatDialog,\r\n        private _searchService: SearchService,\r\n        private _menuService: JedsMenuService,\r\n        private router: Router,\r\n        public _headerTextService: HeaderTextService,\r\n        private pwaService: PwaService,\r\n        private datePipe: DatePipe\r\n\r\n    ) {\r\n        this._headerTextService.setTitulo(this.router);\r\n        this.user = JSON.parse(localStorage.getItem('user'))\r\n    }\r\n\r\n    @ViewChild(TablaDinamicaComponent) tabla: TablaDinamicaComponent;\r\n    ngOnInit(): void {\r\n        // Subscribe to empresa data\r\n        this._empresaService.empresa$\r\n            .pipe(takeUntil(this._unsubscribeAll))\r\n            .subscribe(empresa => {\r\n                this.color_primario = empresa.color_primario;\r\n                this.color_secundario = empresa.color_secundario;\r\n                this.deposito_default = empresa.deposito_default;\r\n            });\r\n\r\n        // Load empresa data\r\n        this._empresaService.getEmpresa();\r\n        this.newForm();\r\n        this.getDepositos();\r\n    }\r\n\r\n\r\n    newForm() {\r\n        this.form = new FormGroup({\r\n            deposito_entrega: new FormControl((this.entrega ? this.entrega.descripcion_deposito : ''), Validators.required),\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Se escanea el QR de la Credencial de Usuario y se toma el idusuario.\r\n     */\r\n    credencialUsuario() {\r\n        this.dialogo.open(LectorQrComponent, {\r\n            panelClass: 'ayuda-dialog'\r\n        }).componentInstance.sendObject.subscribe((code) => {\r\n            if (!code || code.length === 0) {\r\n                this.alert.error('Código QR vacío o inválido.');\r\n                return;\r\n            }\r\n            const idusuario = parseInt(code, 10);\r\n            this.idUsuario = idusuario;\r\n            this._entregasQRService.getUsuarioQR(idusuario).subscribe(response => {\r\n                if (response?.result?.length > 0) {\r\n                    const usuario = response.result[0];\r\n                    this.nombre = usuario.nombre;\r\n                    this.apellido = usuario.apellido;\r\n                    this.mostrarTextoCredencial = false;\r\n                    this.buttonStyleCredencial = 'scanned';\r\n                    this.credencialScaneada = true;\r\n                } else {\r\n                    this.alert.error('Usuario no encontrado.');\r\n                }\r\n            }, error => {\r\n                console.error('Error al obtener usuario:', error);\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Se escanea el QR de Orden de Servicio y se toma la idventagenerica.\r\n     */\r\n    ordenServicio() {\r\n        this.dialogo.open(LectorQrComponent, {\r\n            panelClass: 'ayuda-dialog'\r\n        }).componentInstance.sendObject.subscribe((code) => {\r\n            if (!code || code.length === 0) {\r\n                this.alert.error('Código QR vacío o inválido.');\r\n                return;\r\n            }\r\n            const idventagenerica = parseInt(code, 10);\r\n            this._entregasQRService.getOrdenServicio(idventagenerica).subscribe(response => {\r\n                if (response?.result?.length > 0) {\r\n                    const venta = response.result[0];\r\n                    this.orden_servicio = venta.idventagenerica;\r\n                    this.mostrarTextoOrdenServicio = false;\r\n                    this.buttonStyleOrdenServicio = 'scanned';\r\n                    this.ordenServicioScaneada = true;\r\n                } else {\r\n                    this.alert.error('Orden de Servicio no encontrada.');\r\n                }\r\n            }, error => {\r\n                console.error('Error al obtener venta:', error);\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param option \r\n     * Se va a traer los Depositos para listarlos en un Select\r\n     */\r\n    async getDepositos(option?) {\r\n        const Depositos = await firstValueFrom(this._entregasQRService.getDepositos(option));\r\n        new Promise(async (resolve) => {\r\n            this.depositos = Depositos.list;\r\n\r\n            // Filtrar y autoasignar el depósito por defecto\r\n            const depositoPorDefecto = this.depositos.find(deposito => deposito.iddeposito === this.deposito_default);\r\n            if (depositoPorDefecto) {\r\n                this.form.get('deposito_entrega').setValue(depositoPorDefecto);\r\n            }\r\n\r\n            this.filteredDepositos = this.form.get('deposito_entrega').valueChanges.pipe(\r\n                startWith(''),\r\n                map((value) => this._filterDepositos(value)),\r\n            );\r\n\r\n            resolve(true);\r\n        })\r\n    };\r\n\r\n    /**\r\n     * \r\n     * @param deposito \r\n     * @returns Filtrado de Depositos para el Autocomplete\r\n     */\r\n    private _filterDepositos(deposito: IDeposito): IDeposito[] {\r\n        const filterValue = deposito.toString().toLowerCase();\r\n        return this.depositos.filter(deposito => deposito.descripcion.toLowerCase().includes(filterValue));\r\n    }\r\n\r\n    getTextDeposito(option) {\r\n        if (option.descripcion) {\r\n            return option.descripcion;\r\n        }\r\n        if (option.deposito) {\r\n            return option.deposito;\r\n        }\r\n        return option;\r\n    }\r\n\r\n    /**\r\n     * Esta funcion guarda un item\r\n     */\r\n    agregarArticulo() {\r\n        if (this.form.get('deposito_entrega').value != '') {\r\n            let deposito_entrega_value = this.form.get('deposito_entrega').value.iddeposito;\r\n            this.dialogo\r\n                .open(SaveComponent, {\r\n                    panelClass: 'ayuda-dialog',\r\n                    data: {\r\n                        deposito_entrega: deposito_entrega_value,\r\n                        movimientos: this.mov_art_list,\r\n                    }\r\n                })\r\n                .afterClosed()\r\n                .subscribe({\r\n                    next: (res) => {\r\n                        if (res) {\r\n                            let movimiento_articulo = {\r\n                                idarticulo: res.articulo.idarticulo,\r\n                                cantidad: res.cantidad,\r\n                                idunidadmedida: res.unidad_medida,\r\n                                descripcion_articulo: res.articulo.descripcion,\r\n                                descripcion_um: res.unidadmedida_descripcion,\r\n                                codigo_interno: res.articulo.codigo,\r\n                                stock: res.stock,    //Stock restante de ese articulo con esa um...\r\n                            }\r\n\r\n                            this.mov_art_list = [movimiento_articulo, ...this.mov_art_list];\r\n                            this.dataSource = new MatTableDataSource(this.mov_art_list); //Actualizo la tabla\r\n\r\n                            // Deshabilito el control Deposito\r\n                            if (this.mov_art_list.length != 0) {\r\n                                this.form.get('deposito_entrega').disable();\r\n                            }\r\n\r\n                            this.alert.success(\"Artículo añadido con éxito\")\r\n                        }\r\n                    },\r\n                });\r\n        } else {\r\n            this.alert.warning(\"Seleccione un Depósito de origen\")\r\n        }\r\n    }\r\n\r\n    /**\r\n    * Funcion para limpiar campos\r\n    */\r\n    limpiarCasillero(input) {\r\n        this.form.get(input).setValue('');\r\n    }\r\n\r\n    /**\r\n     * Resetea todo el Formulario de Entrega con QR \r\n     */\r\n    resetForm() {\r\n        this.form.get('deposito_entrega').setValue('');\r\n        this.form.get('deposito_entrega').enable();\r\n        this.form.get('deposito_entrega').setErrors(null);\r\n        this.mov_art_list = [];\r\n        this.dataSource = new MatTableDataSource(this.mov_art_list);\r\n        this.mostrarTextoCredencial = true;\r\n        this.mostrarTextoOrdenServicio = true;\r\n        this.buttonStyleCredencial = 'default';\r\n        this.buttonStyleOrdenServicio = 'default';\r\n        this.credencialScaneada = false;\r\n        this.ordenServicioScaneada = false;\r\n        this.idUsuario = null;\r\n        this.nombre = '';\r\n        this.apellido = '';\r\n        this.orden_servicio = null;\r\n    }\r\n\r\n    onSubmit() {\r\n        // if (!this.credencialScaneada || !this.ordenServicioScaneada) {\r\n        //     this.alert.error('Escanea ambos códigos QR');\r\n        //     return;\r\n        // }\r\n\r\n        if (!this.ordenServicioScaneada) {\r\n            this.alert.error('Debe Escanear La Orden De Servicio');\r\n            return;\r\n        }\r\n\r\n        if (!this.form.get('deposito_entrega').value || !this.form.get('deposito_entrega').value.iddeposito) {\r\n            this.alert.error('Revise Los Datos Ingresados');\r\n            return;\r\n        } else {\r\n            let movimientos = this.mov_art_list.map(objeto => ({   //Encapsulo solamente los datos que utilizaré de los articulos...\r\n                idarticulo: objeto.idarticulo,\r\n                cantidad: objeto.cantidad,\r\n                idunidadmedida: objeto.idunidadmedida,\r\n                idventa: this.orden_servicio\r\n            }))\r\n\r\n            if (movimientos.length === 0) {\r\n                return this.alert.warning('Debe ingresar un articulo a la orden de entrega.')\r\n            }\r\n\r\n            const fecha = new Date().toISOString().split('T')[0];\r\n            const hora = new Date().toLocaleTimeString([], { hour12: false });\r\n\r\n            // Se formatea la fecha nuevamente al formato deseado (YYYY-MM-DD)\r\n            const fecha_formateada = this.datePipe.transform(fecha, 'yyyy-MM-dd');\r\n\r\n            // Se concatena a ambas fecha y hora\r\n            const fecha_hora = `${fecha_formateada} ${hora}`;\r\n\r\n            const payload = {\r\n                entrega: {\r\n                    idusuario: this.user.id,\r\n                    fecha_hora_precarga: fecha_hora,\r\n                    iddeposito: this.form.get('deposito_entrega').value.iddeposito,\r\n                    usuario_entrega: this.idUsuario ? this.idUsuario : null,\r\n                    observaciones: `Entrega QR - Órden N°${this.orden_servicio}`,\r\n                },\r\n                movimientos: movimientos\r\n            }\r\n\r\n            this._entregasQRService.saveEntregaQR(payload)\r\n                .subscribe({\r\n                    next: (data) => {\r\n                        if (data) {\r\n                            this.alert.success(\"Entrega creada con éxito.\");\r\n                            setTimeout(() => {\r\n                                this.resetForm();\r\n                            }, 1500);\r\n                        }\r\n                    }\r\n                });\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this._searchService.unsubscribe();\r\n        this.dialogo.closeAll();\r\n    }\r\n}","<div class=\"flex-auto p-2 sm:p-10 bg-card relative\">\r\n    <h1 class=\"text-3xl font-semibold mb-6 text-center\">Realizar Entrega</h1>\r\n    <div class=\"flex items-center justify-center mb-6\" (click)=\"credencialUsuario()\">\r\n        <button [ngClass]=\"color_primario ? '' : default_color\" [ngStyle]=\"{\r\n                'background': buttonStyleCredencial === 'default' ? color_primario || '' : '',\r\n                'border': buttonStyleCredencial === 'scanned' ? '2px solid ' + (color_primario || '') : '',\r\n                'color': buttonStyleCredencial === 'scanned' ? color_primario || '' : 'white'\r\n            }\" class=\"flex items-center justify-center w-12 h-12 rounded-full mr-4\">\r\n            <svg width=\"22\" height=\"22\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path\r\n                    d=\"M2.66667 2.66667H6.66667V6.66667H2.66667V2.66667ZM13.3333 2.66667V6.66667H9.33333V2.66667H13.3333ZM9.33333 10H10.6667V8.66667H9.33333V7.33333H10.6667V8.66667H12V7.33333H13.3333V8.66667H12V10H13.3333V12H12V13.3333H10.6667V12H8.66667V13.3333H7.33333V10.6667H9.33333V10ZM10.6667 10V12H12V10H10.6667ZM2.66667 13.3333V9.33333H6.66667V13.3333H2.66667ZM4 4V5.33333H5.33333V4H4ZM10.6667 4V5.33333H12V4H10.6667ZM4 10.6667V12H5.33333V10.6667H4ZM2.66667 7.33333H4V8.66667H2.66667V7.33333ZM6 7.33333H8.66667V10H7.33333V8.66667H6V7.33333ZM7.33333 4H8.66667V6.66667H7.33333V4ZM1.33333 1.33333V4H0V1.33333C0 0.979711 0.140476 0.640573 0.390524 0.390524C0.640573 0.140476 0.979711 0 1.33333 0L4 0V1.33333H1.33333ZM14.6667 0C15.0203 0 15.3594 0.140476 15.6095 0.390524C15.8595 0.640573 16 0.979711 16 1.33333V4H14.6667V1.33333H12V0H14.6667ZM1.33333 12V14.6667H4V16H1.33333C0.979711 16 0.640573 15.8595 0.390524 15.6095C0.140476 15.3594 0 15.0203 0 14.6667V12H1.33333ZM14.6667 14.6667V12H16V14.6667C16 15.0203 15.8595 15.3594 15.6095 15.6095C15.3594 15.8595 15.0203 16 14.6667 16H12V14.6667H14.6667Z\"\r\n                    fill=\"currentColor\" />\r\n            </svg>\r\n        </button>\r\n        <p class=\"text-lg font-semibold w-72\" *ngIf=\"mostrarTextoCredencial\">\r\n            Escanear Credencial de Empleado\r\n        </p>\r\n        <p class=\"text-lg font-semibold w-72\" *ngIf=\"!mostrarTextoCredencial\">\r\n            {{ nombre }} {{ apellido }}\r\n        </p>\r\n    </div>\r\n    <div class=\"flex items-center justify-center mb-4\" (click)=\"ordenServicio()\">\r\n        <button [ngClass]=\"color_primario ? '' : default_color\" [ngStyle]=\"{\r\n                'background': buttonStyleOrdenServicio === 'default' ? color_primario || '' : '',\r\n                'border': buttonStyleOrdenServicio === 'scanned' ? '2px solid ' + (color_primario || '') : '',\r\n                'color': buttonStyleOrdenServicio === 'scanned' ? color_primario || '' : 'white'\r\n            }\" class=\"flex items-center justify-center w-12 h-12 rounded-full mr-4\">\r\n            <svg width=\"22\" height=\"22\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path\r\n                    d=\"M2.66667 2.66667H6.66667V6.66667H2.66667V2.66667ZM13.3333 2.66667V6.66667H9.33333V2.66667H13.3333ZM9.33333 10H10.6667V8.66667H9.33333V7.33333H10.6667V8.66667H12V7.33333H13.3333V8.66667H12V10H13.3333V12H12V13.3333H10.6667V12H8.66667V13.3333H7.33333V10.6667H9.33333V10ZM10.6667 10V12H12V10H10.6667ZM2.66667 13.3333V9.33333H6.66667V13.3333H2.66667ZM4 4V5.33333H5.33333V4H4ZM10.6667 4V5.33333H12V4H10.6667ZM4 10.6667V12H5.33333V10.6667H4ZM2.66667 7.33333H4V8.66667H2.66667V7.33333ZM6 7.33333H8.66667V10H7.33333V8.66667H6V7.33333ZM7.33333 4H8.66667V6.66667H7.33333V4ZM1.33333 1.33333V4H0V1.33333C0 0.979711 0.140476 0.640573 0.390524 0.390524C0.640573 0.140476 0.979711 0 1.33333 0L4 0V1.33333H1.33333ZM14.6667 0C15.0203 0 15.3594 0.140476 15.6095 0.390524C15.8595 0.640573 16 0.979711 16 1.33333V4H14.6667V1.33333H12V0H14.6667ZM1.33333 12V14.6667H4V16H1.33333C0.979711 16 0.640573 15.8595 0.390524 15.6095C0.140476 15.3594 0 15.0203 0 14.6667V12H1.33333ZM14.6667 14.6667V12H16V14.6667C16 15.0203 15.8595 15.3594 15.6095 15.6095C15.3594 15.8595 15.0203 16 14.6667 16H12V14.6667H14.6667Z\"\r\n                    fill=\"currentColor\" />\r\n            </svg>\r\n        </button>\r\n        <p class=\"text-lg font-semibold w-72\" *ngIf=\"mostrarTextoOrdenServicio\">\r\n            Escanear Orden de Servicio\r\n        </p>\r\n        <p class=\"text-lg font-semibold w-72\" *ngIf=\"!mostrarTextoOrdenServicio\">\r\n            Órden N°{{ orden_servicio }}\r\n        </p>\r\n    </div>\r\n    <form class=\"flex flex-col form-menu items-center justify-center my-6\" [formGroup]=\"form\">\r\n        <div class=\"w-90\">\r\n            <span class=\"block font-semibold text-lg mb-2\">Depósito</span>\r\n            <mat-form-field appearance=\"fill\" class=\"w-full sm:w-90\">\r\n                <input type=\"text\" matInput formControlName=\"deposito_entrega\" placeholder=\"Seleccione Depósito\"\r\n                    [matAutocomplete]=\"art\">\r\n                <button mat-icon-button matSuffix *ngIf=\"!form.get('deposito_entrega').value\">\r\n                    <mat-icon>arrow_drop_down</mat-icon>\r\n                </button>\r\n                <button mat-icon-button matSuffix (click)=\"limpiarCasillero('deposito_entrega')\"\r\n                    *ngIf=\"form.get('deposito_entrega').value\">\r\n                    <mat-icon class=\"text-xl\">clear</mat-icon>\r\n                </button>\r\n                <mat-autocomplete autoActiveFirstOption #art=\"matAutocomplete\" [displayWith]=\"getTextDeposito\">\r\n                    <mat-option *ngFor=\"let deposito of filteredDepositos | async\" [value]=\"deposito\">\r\n                        {{ deposito.descripcion }}\r\n                    </mat-option>\r\n                </mat-autocomplete>\r\n            </mat-form-field>\r\n            <button mat-flat-button (click)='agregarArticulo()' [class]=\"color_primario ? '' : default_color\"\r\n                [style.border]=\"color_primario || '' \" [style.color]=\"color_primario || '' \"\r\n                class=\"w-36 rounded-lg py-0 ml-[215px] !border border-solid\">\r\n                <div class=\"flex item-center\">\r\n                    <span class=\"text-lg\">Agregar Artículo</span>\r\n                </div>\r\n            </button>\r\n            <!-- Grilla -->\r\n            <div class=\"overflow-y-auto max-h-[150px] h-[150px] shadow-md rounded-lg mt-8\">\r\n                <table mat-table [dataSource]=\"dataSource\" class=' w-full'>\r\n                    <ng-container matColumnDef='codigo_interno'>\r\n                        <th mat-header-cell *matHeaderCellDef [class]=\"color_primario ? '' : default_color\"\r\n                            [style.background]=\"color_primario || '' \" class=\"rounded-tl-lg text-white\">\r\n                            Código Interno\r\n                        </th>\r\n                        <td mat-cell *matCellDef='let movimiento_articulo'>\r\n                            {{movimiento_articulo.codigo_interno}}\r\n                        </td>\r\n                    </ng-container>\r\n                    <ng-container matColumnDef='articulo'>\r\n                        <th mat-header-cell *matHeaderCellDef [class]=\"color_primario ? '' : default_color\"\r\n                            [style.background]=\"color_primario || '' \" class=\"text-white\">\r\n                            Artículo</th>\r\n                        <td mat-cell *matCellDef='let movimiento_articulo'>\r\n                            {{movimiento_articulo.descripcion_articulo}}\r\n                        </td>\r\n                    </ng-container>\r\n                    <ng-container matColumnDef='unidadmedida'>\r\n                        <th mat-header-cell *matHeaderCellDef [class]=\"color_primario ? '' : default_color\"\r\n                            [style.background]=\"color_primario || '' \" class=\"text-white\"> U. de Medida </th>\r\n                        <td mat-cell *matCellDef='let movimiento_articulo'>\r\n                            {{ movimiento_articulo.descripcion_um }}\r\n                        </td>\r\n                    </ng-container>\r\n                    <ng-container matColumnDef='cantidad'>\r\n                        <th mat-header-cell *matHeaderCellDef [class]=\"color_primario ? '' : default_color\"\r\n                            [style.background]=\"color_primario || '' \" class=\"rounded-tr-lg text-white\"> Cantidad </th>\r\n                        <td mat-cell *matCellDef='let movimiento_articulo'>\r\n                            {{ movimiento_articulo.cantidad}}\r\n                        </td>\r\n                    </ng-container>\r\n                    <tr mat-header-row *matHeaderRowDef='columns; sticky: true'></tr>\r\n                    <tr mat-row *matRowDef='let row; columns: columns'></tr>\r\n                </table>\r\n                <div *ngIf=\"dataSource.data.length === 0\" class=\"flex justify-center items-center h-20\">\r\n                    <p class=\"text-gray-600 text-lg\">No hay artículos cargados.</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </form>\r\n    <div class=\"flex items-center justify-center\">\r\n        <div class=\"w-90 mt-8\">\r\n            <button mat-flat-button (click)='onSubmit()' [class]=\"color_primario ? '' : default_color\"\r\n                [style.background]=\"color_primario || '' \" [style.color]=\"color_primario || '' \"\r\n                class=\"rounded-lg w-36 ml-[215px] py-0\">\r\n                <div class=\"flex item-center\">\r\n                    <span class=\"text-lg text-white\">\r\n                        {{ this.idUsuario ? 'Entregar' : 'Precargar' }}\r\n                    </span>\r\n                </div>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, EventEmitter, Inject, OnInit, Output } from '@angular/core';\r\nimport { FormControl, FormGroup, UntypedFormGroup, Validators } from '@angular/forms';\r\nimport { AppAlertService } from 'app/shared/service/app/alert.service';\r\nimport { Observable, Subject, debounceTime, finalize, firstValueFrom, map, startWith, takeUntil, takeWhile, tap, timer } from 'rxjs';\r\nimport { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { MAT_DATE_FORMATS } from '@angular/material/core';\r\nimport { MY_DATE_FORMATS } from '@shared/constants/date-format';\r\nimport { EntregasQRService } from '../../service/entregas-qr.service';\r\nimport { EmpresaService } from '@shared/service/app/empresa.service';\r\nimport { DatePipe } from '@angular/common';\r\nimport { IAlertConfig } from '@shared/models/alert';\r\nimport { LectorQrComponent } from '@shared/components/lector-qr/lector-qr.component';\r\n\r\n@Component({\r\n    selector: 'app-save-entregas',\r\n    templateUrl: './save.component.html',\r\n    styleUrls: ['./save.component.scss'],\r\n    providers: [{ provide: MAT_DATE_FORMATS, useValue: MY_DATE_FORMATS }]\r\n})\r\nexport class SaveComponent implements OnInit {\r\n    form: FormGroup;\r\n    articulos: any[] = [];\r\n    idArticulo: number | null = null;\r\n    unidades_de_medida: any[] = [];\r\n    color_primario: string;\r\n    color_secundario: string;\r\n    default_color: string = 'bg-primary';\r\n    showAlert = false;\r\n    _alertConfig: IAlertConfig;\r\n    private _unsubscribeAll: Subject<any> = new Subject<any>();\r\n    @Output() public creadoExitosamente: EventEmitter<void> = new EventEmitter<void>();\r\n    codigo_interno: string = '';\r\n    descripcion: string = '';\r\n    mostrarTexto: boolean = true;\r\n    buttonStyle: string = 'default';\r\n\r\n    constructor(\r\n        @Inject(MAT_DIALOG_DATA) public data: any,\r\n        private _entregasQRService: EntregasQRService,\r\n        private _empresaService: EmpresaService,\r\n        private datePipe: DatePipe,\r\n        private alert: AppAlertService,\r\n        public dialogRef: MatDialogRef<SaveComponent>,\r\n        private dialogo: MatDialog,\r\n    ) {\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        // Subscribe to empresa data\r\n        this._empresaService.empresa$\r\n            .pipe(takeUntil(this._unsubscribeAll))\r\n            .subscribe(empresa => {\r\n                this.color_primario = empresa.color_primario;\r\n                this.color_secundario = empresa.color_secundario;\r\n            });\r\n\r\n        // Load empresa data\r\n        this._empresaService.getEmpresa();\r\n        this.newForm();\r\n        this.getArticulosDepositos();\r\n        this.subscribeAlert();\r\n        this.etiquetaArticulo();\r\n    }\r\n\r\n    // Alert\r\n    subscribeAlert() {\r\n        this.alert.emitConfig.subscribe({\r\n            next: (config: IAlertConfig) => {\r\n                this.showAlert = true;\r\n                this._alertConfig = {\r\n                    ...config,\r\n                    appearance: 'border',\r\n                };\r\n                let time = 2;\r\n                timer(100, 1500)\r\n                    .pipe(\r\n                        finalize(() => {\r\n                            this.showAlert = false;\r\n                            this._alertConfig = null;\r\n                        }),\r\n                        takeWhile(() => time > 0),\r\n                        takeUntil(this._unsubscribeAll),\r\n                        tap(() => (time -= 1))\r\n                    )\r\n                    .subscribe();\r\n            },\r\n        });\r\n    }\r\n\r\n    newForm() {\r\n        this.form = new FormGroup({\r\n            unidadmedida: new FormControl((''), Validators.required),\r\n            stock_existente: new FormControl(('')),\r\n            cantidad: new FormControl((''), Validators.required),\r\n        });\r\n        this.form.get('unidadmedida').disable();\r\n        this.form.get('stock_existente').disable();\r\n        this.form.get('cantidad').disable();\r\n    }\r\n\r\n    /**\r\n     * Funcion que lista los articulos que posee un déposito.\r\n     */\r\n    async getArticulosDepositos() {\r\n        const articulos_um_deposito = await firstValueFrom(this._entregasQRService.getArticulosDepositos(this.data.deposito_entrega)); // solicitamos los artículos que estén en un depósito\r\n        this.articulos = articulos_um_deposito.list;\r\n    }\r\n\r\n    /**\r\n     * Se escanea el QR de las Etiqueta de Articulos y se toma el idarticulo.\r\n     */\r\n    etiquetaArticulo() {\r\n        this.dialogo.open(LectorQrComponent, {\r\n            panelClass: 'ayuda-dialog'\r\n        }).componentInstance.sendObject.subscribe(async (code) => {\r\n            if (!code || code.length === 0) {\r\n                this.alert.error('Código QR vacío o inválido.');\r\n                return;\r\n            }\r\n            const idarticulo = parseInt(code);\r\n            try {\r\n                const response = await firstValueFrom(this._entregasQRService.getArticuloQR(idarticulo));\r\n                if (response?.result?.length > 0) {\r\n                    const articulo = response.result[0];\r\n                    // Validar si el artículo está en el depósito\r\n                    const articuloEnDeposito = this.articulos.find(item => item.idarticulo === articulo.idarticulo);\r\n                    if (articuloEnDeposito) {\r\n                        this.idArticulo = articulo.idarticulo\r\n                        this.codigo_interno = articulo.codigo_interno;\r\n                        this.descripcion = articulo.descripcion;\r\n                        this.mostrarTexto = false;\r\n                        this.buttonStyle = 'scanned';\r\n                        this.getUnidadesDeMedidaArticulos(articulo.idarticulo);\r\n                    } else {\r\n                        this.alert.error('Artículo sin stock en este depósito.');\r\n                    }\r\n                    this.form.get('unidadmedida').enable()\r\n                    this.form.get('cantidad').enable()\r\n                } else {\r\n                    this.alert.error('Artículo no encontrado.');\r\n                }\r\n            } catch (error) {\r\n                console.error('Error al obtener artículo:', error);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Esta funcion solicita las unidades de medida que posee un articulo.\r\n     * @param idarticulo \r\n     */\r\n    getUnidadesDeMedidaArticulos(idarticulo) {\r\n        new Promise(async (resolve) => {\r\n            this.unidades_de_medida = this.articulos.filter(a => a.idarticulo === idarticulo).sort((a, b) => a.factor_um - b.factor_um).map(a => {\r\n                return {\r\n                    idarticulo: a.idarticulo,\r\n                    codigo_interno: a.codigo_interno,\r\n                    idunidadmedida: a.idunidadmedida,\r\n                    descripcion_um: a.um,\r\n                    stock: a.stock\r\n                }\r\n            });\r\n\r\n            // Autoasigna la primera unidad de medida al control del formulario\r\n            if (this.unidades_de_medida.length > 0) {\r\n                this.form.get('unidadmedida').setValue(this.unidades_de_medida[0].idunidadmedida);\r\n                this.seleccionArticulo({ um: this.unidades_de_medida[0].idunidadmedida });\r\n            }\r\n            resolve(true);\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Esta funcion maneja las cambios de seleccion que puedan tener articulos y unidades de medida.\r\n     * @param $event \r\n     */\r\n    seleccionArticulo($event) {\r\n        //Al seleccionar un articulo...\r\n        if ($event.idarticulo) {\r\n            this.form.get('unidadmedida').enable()\r\n            this.getUnidadesDeMedidaArticulos($event.idarticulo) //...Buscamos las UM que posee ese articulo.\r\n        }\r\n        // - Mostrar Stock -\r\n        //Al seleccionar la UM...\r\n        if ($event.um) {\r\n            //Consultamos sí existe un articulo con esa UM y utilizamos la respuesta para ver si existe un movimiento con ese articulo y esa UM en los movimientos.\r\n            let articulo_um = this.unidades_de_medida.find(a => a.idarticulo === this.idArticulo && a.idunidadmedida === this.form.get('unidadmedida').value);\r\n            let stock; //variable auxiliar   \r\n            let cantidad_existente = 0;\r\n\r\n            let existeMovimiento = this.data.movimientos.length > 0 ? true : false; //Consultamos sí hay movimientos\r\n\r\n            if (existeMovimiento) { //Sí existe minimo un movimiento y es una crecion...\r\n                let articulos_existentes = this.data.movimientos.filter(a => a.idarticulo === articulo_um.idarticulo && a.idunidadmedida === articulo_um.idunidadmedida); //Se hace esto para mantener el stock actualizado, en caso de haber sido modificado.\r\n                //Si existen movimientos de articulos con la misma UM...\r\n                articulos_existentes.forEach(ae => {\r\n                    cantidad_existente = cantidad_existente + Number(ae.cantidad); //...sumamos la cantidad que equivalen\r\n                })\r\n                stock = `${Number(articulo_um.stock) - cantidad_existente}`; //...Se le asigna el stock restante...\r\n            } else {\r\n                stock = articulo_um.stock; //..Sino el stock que traiga ese articulo con esa UM del servicio.\r\n            }\r\n            this.form.get('stock_existente').setValue(stock) //Lo mostramos.\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param input \r\n     * Metodo para el boton de suma para el campo de Cantidad.\r\n     */\r\n    sumaArticulo(input: HTMLInputElement) {\r\n        if (this.idArticulo !== null) {\r\n            const currentValue = Number(input.value) || 0;\r\n            this.form.controls['cantidad'].setValue(currentValue + 1);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param input \r\n     * Metodo para el boton de resta para el campo de Cantidad.\r\n     */\r\n    restaArticulo(input: HTMLInputElement) {\r\n        if (this.idArticulo !== null) {\r\n            const currentValue = Number(input.value) || 0;\r\n            if (currentValue > 0) {\r\n                this.form.controls['cantidad'].setValue(currentValue - 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Limpia los campos del Formulario.\r\n     */\r\n    limpiarCasilleros() {\r\n        this.codigo_interno = '';\r\n        this.descripcion = '';\r\n        this.mostrarTexto = true;\r\n        this.buttonStyle = 'default';\r\n        this.form.reset({\r\n            unidadmedida: '',\r\n            stock_existente: '',\r\n            cantidad: ''\r\n        });\r\n    }\r\n\r\n    /**\r\n    * Maneja los eventos de teclado en el formulario.\r\n    * @param event - El evento del teclado.\r\n    */\r\n    onKeyDown(event: KeyboardEvent): void {\r\n        if (event.key === 'Enter') {\r\n            event.preventDefault(); // Evita el comportamiento predeterminado del Enter (como el envío de formularios)\r\n            this.onSubmit(); // Llama a la función onSubmit\r\n        }\r\n    }\r\n\r\n\r\n    onSubmit() {\r\n        if (!this.form.valid) {\r\n            return this.alert.error('Revise Los Datos Ingresados');\r\n        } else {\r\n            this.articulos.forEach(articulo => {\r\n                if (articulo.idarticulo === this.idArticulo && articulo.idunidadmedida === this.form.get('unidadmedida').value) {\r\n                    if (this.form.get('cantidad').value > articulo.stock) {\r\n                        this.form.get('cantidad').setValue('');\r\n                        return this.alert.warning('No hay stock suficiente!');\r\n                    }\r\n\r\n                    let existeMovimiento = this.data.movimientos.find(movimiento => movimiento.idarticulo === this.idArticulo && movimiento.idunidadmedida === this.form.get('unidadmedida').value);\r\n\r\n                    if (existeMovimiento) {\r\n                        this.form.get('unidadmedida').setValue('');\r\n                        this.form.get('stock_existente').setValue('');\r\n                        this.form.get('cantidad').setValue('');\r\n                        return this.alert.warning('Este artículo ya tiene un movimiento con esta unidad.');\r\n                    }\r\n\r\n                    if (this.form.get('cantidad').value <= articulo.stock && this.form.get('cantidad').value > 0) {\r\n                        let unidadmedida = this.unidades_de_medida.find(um => um.idunidadmedida === this.form.get('unidadmedida').value); //Traigo una UM que coincida con mi seleccion para poder utilizar su descripcion.\r\n\r\n                        let movimiento_articulo = {\r\n                            articulo: {\r\n                                idarticulo: this.idArticulo,\r\n                                codigo: this.codigo_interno,\r\n                                descripcion: this.descripcion\r\n                            },\r\n                            unidad_medida: this.form.get('unidadmedida').value,\r\n                            unidadmedida_descripcion: unidadmedida.descripcion_um,\r\n                            stock: `${Number(articulo.stock) - this.form.get('cantidad').value}`,\r\n                            cantidad: this.form.get('cantidad').value,\r\n                        }\r\n\r\n                        this.onCloseMenu(movimiento_articulo)\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    onCloseMenu(articulo?) {\r\n        this.dialogRef.close(articulo ? articulo : false)\r\n    }\r\n}","<div class=\"fixed inset-0 sm:static max-h-screen sm:inset-auto flex flex-col sm:min-w-120 sm:w-min-w-90 sm:rounded-2xl overflow-y-auto overflow-hidden shadow-lg bg-white dark:bg-slate-900\">\r\n    <div [class]=\"color_primario ? '' : default_color\" [style.background]=\"color_primario\"\r\n        [style.color]=\"color_secundario || '' \" class=\"w-full px-4 py-4 flex justify-between items-center\">\r\n        <span class=\"text-white font-bold text-lg\">Agregar Artículo</span>\r\n        <div>\r\n            <button mat-icon-button class=\"md:hidden\" (click)=\"limpiarCasilleros()\">\r\n                <mat-icon class=\"text-white\">refresh</mat-icon>\r\n            </button>\r\n            <button mat-icon-button (click)=\"onCloseMenu()\">\r\n                <mat-icon class=\"text-white\">close</mat-icon>\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <!-- Alert -->\r\n    <fuse-alert\r\n        class=\"fixed top-0 left-0 w-full flex justify-center items-center mt-8 alert-main z-99999\"\r\n        [type]=\"_alertConfig.type\"\r\n        [appearance]=\"'outline'\"\r\n        *ngIf=\"showAlert\"\r\n        [@fadeIn]=\"showAlert\"\r\n    >\r\n    {{ _alertConfig.message }}\r\n    </fuse-alert>\r\n    <div class=\"flex px-8 pt-6 items-center sm:ml-12\" (click)=\"etiquetaArticulo()\">\r\n        <button\r\n            [ngClass]=\"color_primario ? '' : default_color\"\r\n            [ngStyle]=\"{\r\n                'background': buttonStyle === 'default' ? color_primario || '' : '',\r\n                'border': buttonStyle === 'scanned' ? '2px solid ' + (color_primario || '') : '',\r\n                'color': buttonStyle === 'scanned' ? color_primario || '' : 'white'\r\n            }\"\r\n            class=\"flex items-center justify-center w-12 h-12 rounded-full mr-4\">\r\n            <svg width=\"22\" height=\"22\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path d=\"M2.66667 2.66667H6.66667V6.66667H2.66667V2.66667ZM13.3333 2.66667V6.66667H9.33333V2.66667H13.3333ZM9.33333 10H10.6667V8.66667H9.33333V7.33333H10.6667V8.66667H12V7.33333H13.3333V8.66667H12V10H13.3333V12H12V13.3333H10.6667V12H8.66667V13.3333H7.33333V10.6667H9.33333V10ZM10.6667 10V12H12V10H10.6667ZM2.66667 13.3333V9.33333H6.66667V13.3333H2.66667ZM4 4V5.33333H5.33333V4H4ZM10.6667 4V5.33333H12V4H10.6667ZM4 10.6667V12H5.33333V10.6667H4ZM2.66667 7.33333H4V8.66667H2.66667V7.33333ZM6 7.33333H8.66667V10H7.33333V8.66667H6V7.33333ZM7.33333 4H8.66667V6.66667H7.33333V4ZM1.33333 1.33333V4H0V1.33333C0 0.979711 0.140476 0.640573 0.390524 0.390524C0.640573 0.140476 0.979711 0 1.33333 0L4 0V1.33333H1.33333ZM14.6667 0C15.0203 0 15.3594 0.140476 15.6095 0.390524C15.8595 0.640573 16 0.979711 16 1.33333V4H14.6667V1.33333H12V0H14.6667ZM1.33333 12V14.6667H4V16H1.33333C0.979711 16 0.640573 15.8595 0.390524 15.6095C0.140476 15.3594 0 15.0203 0 14.6667V12H1.33333ZM14.6667 14.6667V12H16V14.6667C16 15.0203 15.8595 15.3594 15.6095 15.6095C15.3594 15.8595 15.0203 16 14.6667 16H12V14.6667H14.6667Z\" fill=\"currentColor\" />\r\n            </svg>\r\n        </button>\r\n        <p class=\"text-lg font-semibold\" *ngIf=\"mostrarTexto\">\r\n            Escanear Artículo\r\n        </p>\r\n        <p class=\"text-lg font-semibold\" *ngIf=\"!mostrarTexto\">\r\n            {{codigo_interno}} - {{descripcion}}\r\n        </p>\r\n    </div>    \r\n    <form class=\"form-menu p-8 sm:ml-12\" [formGroup]=\"form\">\r\n        <div class=\"flex gap-4\">\r\n            <div class=\"flex flex-col\">\r\n                <span class=\"block font-semibold text-lg mb-2\">Unidad de Medida</span>\r\n                <mat-form-field appearance='outline' class=\"w-[186px]\">\r\n                    <mat-select formControlName=\"unidadmedida\" (ngModelChange)=\"seleccionArticulo({um: $event})\" placeholder=\"Selecciona una UM\">\r\n                        <mat-option *ngFor=\"let um of unidades_de_medida\"\r\n                        [value]=\"um.idunidadmedida\">{{um.descripcion_um}}</mat-option>\r\n                    </mat-select>\r\n                </mat-form-field>\r\n            </div>\r\n            <div class=\"flex flex-col\">\r\n                <span class=\"block font-semibold text-lg mb-2 text-gray-500\">En Stock</span>\r\n                <mat-form-field appearance='outline' class=\"w-32\">\r\n                    <input matInput type=\"number\" formControlName=\"stock_existente\" placeholder=\"Stock Artículo\" readonly=\"true\">\r\n                </mat-form-field>\r\n            </div>\r\n        </div>\r\n        <div class=\"flex gap-2\">\r\n            <div class=\"flex flex-col\">\r\n                <span class=\"block font-semibold text-lg mb-2\">Cantidad</span>\r\n                <mat-form-field appearance=\"outline\" class=\"w-48\">\r\n                    <input matInput type=\"number\" formControlName=\"cantidad\" placeholder=\"Cantidad a Entregar\" #cantidadInput (keydown)=\"onKeyDown($event)\">\r\n                </mat-form-field>\r\n            </div>\r\n            <div class=\"flex items-center justify-center ml-2\">\r\n                <button \r\n                    [class]=\"color_primario ? '' : default_color\" \r\n                    [style.background]=\"color_primario\" \r\n                    class=\"flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-full mt-3.5 mr-2 sm:mr-4 transition-transform transform active:scale-95\"\r\n                    (click)=\"sumaArticulo(cantidadInput)\">\r\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <path d=\"M16 10H10V16H6V10H0V6H6V0H10V6H16V10Z\" fill=\"white\"/>\r\n                    </svg>                    \r\n                </button>\r\n                <button \r\n                    [class]=\"color_primario ? '' : default_color\" \r\n                    [style.background]=\"color_primario\" \r\n                    class=\"flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-full mt-3.5 transition-transform transform active:scale-95\"\r\n                    (click)=\"restaArticulo(cantidadInput)\">\r\n                    <svg width=\"14\" height=\"2\" viewBox=\"0 0 14 2\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <path d=\"M14 2H0V0H14V2Z\" fill=\"white\"/>\r\n                    </svg>                    \r\n                </button>\r\n            </div>\r\n        </div>   \r\n    </form>\r\n    <div class=\"w-full md:flex md:justify-center md:pb-6 md:px-6 mt-auto\"> \r\n        <button mat-flat-button [class]=\"color_primario ? '' : default_color\" [style.border]=\"color_primario || '' \"\r\n            [style.color]=\"color_primario || '' \" class=\"hidden !border border-solid md:block md:w-36 md:rounded-lg py-8 md:py-0 mr-2\"\r\n            (click)=\"limpiarCasilleros()\">\r\n            <span class=\"font-medium text-base\">Limpiar</span>\r\n        </button>\r\n        <button mat-flat-button [class]=\"color_primario  ? '' : default_color\" [style.background-color]=\"color_primario\"\r\n            [style.color]=\"color_secundario || '' \" class='w-full rounded-none md:w-36 md:rounded-lg md:w-36 py-8 md:py-0' (click)='onSubmit()'>\r\n            <span class=\"text-white font-medium text-base\">Agregar</span>\r\n        </button>\r\n    </div>\r\n</div>","import { RouterModule, Routes } from '@angular/router';\r\nimport { CommonModule, DatePipe } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { MatToolbarModule } from '@angular/material/toolbar'\r\nimport { MatTableModule } from '@angular/material/table';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { FuseAlertComponent } from '@fuse/components/alert';\r\nimport { JedsMenuService } from '@shared/service/app/jeds-menu.service';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { AppAlertService } from '@shared/service/app/alert.service';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\nimport { MatAutocompleteModule } from '@angular/material/autocomplete';\r\nimport { MatCheckboxModule } from '@angular/material/checkbox';\r\nimport { MatSortModule } from '@angular/material/sort';\r\nimport { TablaDinamicaModule } from '@shared/components/tabla-dinamica/tabla-dinamica.module';\r\nimport { MatDialogModule } from '@angular/material/dialog';\r\nimport { MatDatepickerModule } from '@angular/material/datepicker';\r\nimport { EntregasQRService } from './service/entregas-qr.service';\r\nimport { EntregasQRComponent } from './components/entregas-qr.component';\r\nimport { SaveComponent } from './components/save/save.component';\r\n\r\nconst routes: Routes = [\r\n    {\r\n        path: '',\r\n        component: EntregasQRComponent\r\n    }\r\n];\r\n@NgModule({\r\n    declarations: [EntregasQRComponent, SaveComponent],\r\n    imports: [\r\n        CommonModule,\r\n        RouterModule.forChild(routes),\r\n        MatTableModule,\r\n        MatButtonModule,\r\n        MatSelectModule,\r\n        MatFormFieldModule,\r\n        ReactiveFormsModule,\r\n        MatInputModule,\r\n        MatIconModule,\r\n        FuseAlertComponent,\r\n        MatTooltipModule,\r\n        MatAutocompleteModule,\r\n        MatToolbarModule,\r\n        MatCheckboxModule,\r\n        MatSortModule,\r\n        TablaDinamicaModule,\r\n        MatDialogModule,\r\n        MatDatepickerModule\r\n    ],\r\n    exports: [RouterModule],\r\n    providers: [ EntregasQRService, JedsMenuService, AppAlertService, DatePipe]\r\n})\r\nexport class EntregasQRModule { }","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { AuthService } from '@core/auth/auth.service';\r\nimport { environment } from 'environments/environment';\r\nimport { Observable, Subject } from 'rxjs';\r\nimport { IEntregaQR } from '../models/entrega-qr';\r\n\r\n@Injectable()\r\nexport class EntregasQRService {\r\n    constructor(\r\n        private http: HttpClient, \r\n        private _authService: AuthService\r\n    ) { }\r\n\r\n    /**\r\n     * Funcion en el Servicio \r\n     * @param entregas \r\n     * @returns Crea un item nuevo\r\n     */\r\n    saveEntregaQR(entregas: IEntregaQR): Observable<IEntregaQR> {\r\n        return this.http.post<IEntregaQR>(`${environment.stock.entregas}`, entregas);\r\n    }\r\n    \r\n    /**\r\n     * \r\n     * @param codigo \r\n     * @returns Verifica si el QR escaneado de la Credencial del Usuario es valido.\r\n     */\r\n    getUsuarioQR(codigo: number): Observable<any> {\r\n        return this.http.get<any>(`${environment.login.view_usuarios}?filter[codigo]=`+ codigo );\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param idventagenerica \r\n     * @returns Verifica si el QR escaneado de la Orden de Servicio es valido.\r\n     */\r\n    getOrdenServicio(idventagenerica: number): Observable<any> {\r\n        return this.http.get<any>(`${environment.ventas.view_venta_genericas}?filter[idventagenerica]=`+ idventagenerica)\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param idarticulo \r\n     * @returns Verifica si el QR escaneado de las Etiquetas de Articulos es valido.\r\n     */\r\n    getArticuloQR(idarticulo: number): Observable<any> {\r\n        return this.http.get<any>(`${environment.stock.view_articulos}?pagination=1&filter[idarticulo]=`+ idarticulo);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param option \r\n     * @returns Trae los Depositos de dichas empresa\r\n     */\r\n    getDepositos(option?) {\r\n        let f = '?';\r\n        f += !option ? 'filter[activo]=1' : '';\r\n        let subject = new Subject<any>();\r\n        this.http.get<Response[]>(`${environment.stock.depositos}${f}`)\r\n            .subscribe((resp: any) => {\r\n                this._authService.accessToken = resp.token;\r\n                subject.next({\r\n                    list: resp.result\r\n                })\r\n            });\r\n        return subject.asObservable()\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param deposito \r\n     * @returns Trae los Articulos que se tienen en dichos Depositos.\r\n     */\r\n    getArticulosDepositos(deposito: number) {\r\n        let f = `?filter[deposito]=${deposito}`\r\n        let subject = new Subject<any>();\r\n        this.http.get<Response[]>(`${environment.stock.view_stock_articulo_depositos}${f}`)\r\n            .subscribe((resp: any) => {\r\n                this._authService.accessToken = resp.token;\r\n                subject.next({\r\n                    list: resp.result\r\n                })\r\n            });\r\n        return subject.asObservable()\r\n    }\r\n\r\n}"],"names":["Subject","firstValueFrom","map","startWith","takeUntil","MatTableDataSource","FormControl","FormGroup","Validators","TablaDinamicaComponent","LectorQrComponent","SaveComponent","i0","ɵɵnamespaceHTML","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate2","ctx_r1","nombre","apellido","ɵɵtextInterpolate1","ctx_r3","orden_servicio","ɵɵlistener","EntregasQRComponent_button_22_Template_button_click_0_listener","ɵɵrestoreView","_r20","ctx_r19","ɵɵnextContext","ɵɵresetView","limpiarCasillero","ɵɵproperty","deposito_r21","descripcion","ɵɵclassMap","ctx_r8","color_primario","default_color","ɵɵstyleProp","movimiento_articulo_r22","codigo_interno","ctx_r10","movimiento_articulo_r23","descripcion_articulo","ctx_r12","movimiento_articulo_r24","descripcion_um","ctx_r14","movimiento_articulo_r25","cantidad","ɵɵelement","EntregasQRComponent","constructor","_entregasQRService","_empresaService","confirm","alert","dialogo","_searchService","_menuService","router","_headerTextService","pwaService","datePipe","columns","dataSource","depositos","mov_art_list","usuarios","_unsubscribeAll","mostrarTextoCredencial","mostrarTextoOrdenServicio","buttonStyleCredencial","buttonStyleOrdenServicio","credencialScaneada","ordenServicioScaneada","deposito_default","setTitulo","user","JSON","parse","localStorage","getItem","ngOnInit","empresa$","pipe","subscribe","empresa","color_secundario","getEmpresa","newForm","getDepositos","form","deposito_entrega","entrega","descripcion_deposito","required","credencialUsuario","open","panelClass","componentInstance","sendObject","code","length","error","idusuario","parseInt","idUsuario","getUsuarioQR","response","result","usuario","console","ordenServicio","idventagenerica","getOrdenServicio","venta","option","_this","_asyncToGenerator","Depositos","Promise","_ref","resolve","list","depositoPorDefecto","find","deposito","iddeposito","get","setValue","filteredDepositos","valueChanges","value","_filterDepositos","_x","apply","arguments","filterValue","toString","toLowerCase","filter","includes","getTextDeposito","agregarArticulo","deposito_entrega_value","data","movimientos","afterClosed","next","res","movimiento_articulo","idarticulo","articulo","idunidadmedida","unidad_medida","unidadmedida_descripcion","codigo","stock","disable","success","warning","input","resetForm","enable","setErrors","onSubmit","objeto","idventa","fecha","Date","toISOString","split","hora","toLocaleTimeString","hour12","fecha_formateada","transform","fecha_hora","payload","id","fecha_hora_precarga","usuario_entrega","observaciones","saveEntregaQR","setTimeout","ngOnDestroy","unsubscribe","closeAll","ɵɵdirectiveInject","i1","EntregasQRService","i2","EmpresaService","i3","FuseConfirmationService","i4","AppAlertService","i5","MatDialog","i6","SearchService","i7","JedsMenuService","i8","Router","i9","HeaderTextService","i10","PwaService","i11","DatePipe","selectors","viewQuery","EntregasQRComponent_Query","rf","ctx","EntregasQRComponent_Template_div_click_3_listener","ɵɵnamespaceSVG","ɵɵtemplate","EntregasQRComponent_p_7_Template","EntregasQRComponent_p_8_Template","EntregasQRComponent_Template_div_click_9_listener","EntregasQRComponent_p_13_Template","EntregasQRComponent_p_14_Template","EntregasQRComponent_button_21_Template","EntregasQRComponent_button_22_Template","EntregasQRComponent_mat_option_25_Template","EntregasQRComponent_Template_button_click_27_listener","ɵɵelementContainerStart","EntregasQRComponent_th_34_Template","EntregasQRComponent_td_35_Template","ɵɵelementContainerEnd","EntregasQRComponent_th_37_Template","EntregasQRComponent_td_38_Template","EntregasQRComponent_th_40_Template","EntregasQRComponent_td_41_Template","EntregasQRComponent_th_43_Template","EntregasQRComponent_td_44_Template","EntregasQRComponent_tr_45_Template","EntregasQRComponent_tr_46_Template","EntregasQRComponent_div_47_Template","EntregasQRComponent_Template_button_click_50_listener","ɵɵpureFunction3","_c0","_r6","ɵɵpipeBind1","EventEmitter","finalize","takeWhile","tap","timer","MAT_DIALOG_DATA","MAT_DATE_FORMATS","MY_DATE_FORMATS","ctx_r0","_alertConfig","type","showAlert","message","ctx_r2","um_r5","ɵɵtextInterpolate","dialogRef","articulos","idArticulo","unidades_de_medida","creadoExitosamente","mostrarTexto","buttonStyle","getArticulosDepositos","subscribeAlert","etiquetaArticulo","emitConfig","config","appearance","time","unidadmedida","stock_existente","articulos_um_deposito","_this2","getArticuloQR","articuloEnDeposito","item","getUnidadesDeMedidaArticulos","_this3","_ref2","a","sort","b","factor_um","um","seleccionArticulo","_x2","$event","articulo_um","cantidad_existente","existeMovimiento","articulos_existentes","forEach","ae","Number","sumaArticulo","currentValue","controls","restaArticulo","limpiarCasilleros","reset","onKeyDown","event","key","preventDefault","valid","movimiento","onCloseMenu","close","MatDialogRef","outputs","features","ɵɵProvidersFeature","provide","useValue","decls","vars","consts","template","SaveComponent_Template","SaveComponent_Template_button_click_5_listener","SaveComponent_Template_button_click_8_listener","SaveComponent_fuse_alert_11_Template","SaveComponent_Template_div_click_12_listener","SaveComponent_p_16_Template","SaveComponent_p_17_Template","SaveComponent_Template_mat_select_ngModelChange_24_listener","SaveComponent_mat_option_25_Template","SaveComponent_Template_input_keydown_36_listener","SaveComponent_Template_button_click_39_listener","_r4","ɵɵreference","SaveComponent_Template_button_click_42_listener","SaveComponent_Template_button_click_46_listener","SaveComponent_Template_button_click_49_listener","RouterModule","CommonModule","MatToolbarModule","MatTableModule","MatButtonModule","MatSelectModule","MatFormFieldModule","ReactiveFormsModule","MatInputModule","FuseAlertComponent","MatIconModule","MatTooltipModule","MatAutocompleteModule","MatCheckboxModule","MatSortModule","TablaDinamicaModule","MatDialogModule","MatDatepickerModule","routes","path","component","EntregasQRModule","imports","forChild","declarations","exports","environment","http","_authService","entregas","post","login","view_usuarios","ventas","view_venta_genericas","view_articulos","f","subject","resp","accessToken","token","asObservable","view_stock_articulo_depositos","ɵɵinject","HttpClient","AuthService","factory","ɵfac"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}