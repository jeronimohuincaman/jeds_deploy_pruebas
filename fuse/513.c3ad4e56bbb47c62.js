"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[513],{4513:(K,x,o)=>{o.r(x),o.d(x,{TipoMovimientosModule:()=>z});var f=o(1531),S=o(4755),N=o(9383),M=o(3627),l=o(1728),v=o(787),u=o(9114),s=o(9401),C=o(9609),A=o(5971),d=o(3686),p=o(430),h=o(6375),Z=o(3649),t=o(2223),J=o(8372),U=o(1884),b=o(5580),m=o(2340),D=o(3144);let T=(()=>{class n{constructor(e){this.http=e}getTiposMovimientos(e){let i="?";return i+="desc"==e?"sort=-descripcion":"sort=descripcion",this.http.get(`${m.N.fondos.fondos_tipo}${i}`)}saveTipoMovimiento(e){return this.http.post(`${m.N.fondos.fondos_tipo}`,e)}updateTipoMovimiento(e){return this.http.put(`${m.N.fondos.fondos_tipo}/`+e.idtipo,e)}deleteTipoMovimiento(e){return this.http.delete(m.N.fondos.fondos_tipo+"/"+e)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(D.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var y=o(1217);let w=(()=>{class n{constructor(e,i,a,c,g){this.data=e,this._tiposMovimientosService=i,this.alert=a,this.menu=c,this.dialogRef=g,this.columns=["nombre","activo","acciones"],this.tipo_movimiento=this.data?this.data:null,this.title=this.tipo_movimiento?.idtipo?"Editar tipo de Movimiento":"Nuevo tipo de Movimiento"}ngOnInit(){this.newForm()}newForm(){this.form=new s.cw({nombre:new s.NI(this.tipo_movimiento?this.tipo_movimiento.descripcion:"",s.kI.required),activo:new s.NI(this.tipo_movimiento?this.tipo_movimiento.activo?1:0:1,s.kI.required)})}onSubmit(){if(!this.form.valid)return this.alert.warning("Revise Los Datos Ingresados");this.tipo_movimiento={...this.tipo_movimiento,descripcion:this.form.get("nombre").value,activo:this.form.get("activo").value},this.tipo_movimiento.idtipo?this._tiposMovimientosService.updateTipoMovimiento(this.tipo_movimiento).subscribe({next:e=>{e&&this.onCloseMenu()}}):this._tiposMovimientosService.saveTipoMovimiento(this.tipo_movimiento).subscribe({next:e=>{e&&this.onCloseMenu()}})}onCloseMenu(){this.dialogRef.close(!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(b.WI),t.Y36(T),t.Y36(h.T),t.Y36(d.r),t.Y36(b.so))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-save-tipo-movimiento"]],decls:24,vars:4,consts:[[1,"fixed","inset-0","sm:static","max-h-screen","sm:inset-auto","flex","flex-col","sm:min-w-90","sm:w-90","sm:rounded-2xl","overflow-y-auto","overflow-hidden","shadow-lg","bg-white","dark:bg-slate-900"],[1,"w-full","px-4","py-4","bg-primary","flex","justify-between","items-center"],[1,"text-white","font-bold","text-lg"],["mat-icon-button","",3,"click"],[1,"text-white"],[1,"flex","flex-col","w-full","h-full","p-4","form-menu",3,"formGroup"],["appearance","outline",1,"w-full"],["matInput","","formControlName","nombre"],["formControlName","activo"],[3,"value"],[1,"w-full","md:flex","justify-center","pb-4","md:px-4"],["mat-raised-button","","color","accent",1,"w-full","bg-primary","rounded-none","md:w-28","md:rounded-3xl","py-8","md:py-0",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span",2),t._uU(3),t.qZA(),t.TgZ(4,"div")(5,"button",3),t.NdJ("click",function(){return i.onCloseMenu()}),t.TgZ(6,"mat-icon",4),t._uU(7,"close"),t.qZA()()()(),t.TgZ(8,"form",5)(9,"mat-form-field",6)(10,"mat-label"),t._uU(11,"Nombre"),t.qZA(),t._UZ(12,"input",7),t.qZA(),t.TgZ(13,"mat-form-field",6)(14,"mat-label"),t._uU(15,"Activo"),t.qZA(),t.TgZ(16,"mat-select",8)(17,"mat-option",9),t._uU(18,"No"),t.qZA(),t.TgZ(19,"mat-option",9),t._uU(20,"Si"),t.qZA()()()(),t.TgZ(21,"div",10)(22,"button",11),t.NdJ("click",function(){return i.onSubmit()}),t._uU(23," Guardar "),t.qZA()()()),2&e&&(t.xp6(3),t.Oqu(i.title),t.xp6(5),t.Q6J("formGroup",i.form),t.xp6(9),t.Q6J("value",0),t.xp6(2),t.Q6J("value",1))},dependencies:[l.lW,l.RK,u.KE,u.hX,v.gD,y.ey,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,C.Nt,p.Hw]}),n})();var F=o(2018),Y=o(8288);let E=(()=>{class n{constructor(e,i){this.data=e,this.menuService=i}ngOnInit(){this.formFilters=new s.cw({activo:new s.NI("")}),this.formFilters.patchValue(this.data.filter)}resetFilters(){this.formFilters.reset({activo:-1})}onCloseMenu(e=null){this.menuService.close(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36("MENU_DATA"),t.Y36(d.r))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-filter-menu-tipo-de-movimiento"]],decls:29,vars:5,consts:[[1,"fixed","filtroJeds","inset-0","sm:static","max-h-screen","sm:inset-auto","flex","flex-col","sm:min-w-90","sm:w-90","sm:rounded-2xl","overflow-y-auto","overflow-hidden","shadow-lg","bg-white","dark:bg-slate-900"],[1,"w-full","px-4","py-4","bg-primary","flex","justify-between","items-center"],[1,"text-white","font-bold","text-lg"],["mat-icon-button","",1,"md:hidden",3,"click"],[1,"text-white"],["mat-icon-button","",3,"click"],[1,"flex","flex-col","w-full","h-full","p-4","form-menu",3,"formGroup"],[1,"font-bold","text-gray-500","text-base"],[1,"fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64","mt-2"],["formControlName","activo"],[3,"value"],[1,"w-full","md:flex","md:justify-between","md:pb-4","md:px-4"],["mat-stroked-button","","color","primary",1,"w-full","rounded-none","md:w-28","md:rounded-3xl","hidden","md:block",3,"click"],[1,"text-gray-700","font-bold"],["mat-raised-button","",1,"w-full","bg-primary","rounded-none","md:w-28","md:rounded-3xl","py-8","md:py-0",3,"click"],[1,"text-white","font-bold"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span",2),t._uU(3,"Filtros"),t.qZA(),t.TgZ(4,"div")(5,"button",3),t.NdJ("click",function(){return i.resetFilters()}),t.TgZ(6,"mat-icon",4),t._uU(7,"refresh"),t.qZA()(),t.TgZ(8,"button",5),t.NdJ("click",function(){return i.onCloseMenu()}),t.TgZ(9,"mat-icon",4),t._uU(10,"close"),t.qZA()()()(),t.TgZ(11,"form",6)(12,"span",7),t._uU(13,"Activo"),t.qZA(),t.TgZ(14,"mat-form-field",8)(15,"mat-select",9)(16,"mat-option",10),t._uU(17,"Todos"),t.qZA(),t.TgZ(18,"mat-option",10),t._uU(19,"Si"),t.qZA(),t.TgZ(20,"mat-option",10),t._uU(21,"No"),t.qZA()()()(),t.TgZ(22,"div",11)(23,"button",12),t.NdJ("click",function(){return i.resetFilters()}),t.TgZ(24,"span",13),t._uU(25,"Limpiar"),t.qZA()(),t.TgZ(26,"button",14),t.NdJ("click",function(){return i.onCloseMenu(i.formFilters.getRawValue())}),t.TgZ(27,"span",15),t._uU(28,"Filtrar"),t.qZA()()()()),2&e&&(t.Q6J("@expandCollapse","expanded"),t.xp6(11),t.Q6J("formGroup",i.formFilters),t.xp6(5),t.Q6J("value",-1),t.xp6(2),t.Q6J("value",1),t.xp6(2),t.Q6J("value",0))},dependencies:[l.lW,l.RK,u.KE,v.gD,y.ey,s._Y,s.JJ,s.JL,s.sg,s.u,p.Hw],data:{animation:Y.L}}),n})();var I=o(1683),L=o(7374),Q=o(8978);let j=(()=>{class n{constructor(e,i,a,c,g,G,X,$){this._tipoDeMovimientosService=e,this._menuService=i,this.confirm=a,this.alert=c,this.dialogo=g,this._searchService=G,this.router=X,this._headerTextService=$,this.dataSource=new M.by,this.column_params=["descripcion","activo","acciones"],this.headers=["Descripci\xf3n","Activo"],this.funcionesObjeto=null,this.filtroBusqueda="",this.filtersLike=["descripcion"],this.filter={activo:-1},this.extraParams="",this.parametrosActualizados=new t.vpe,this.env=m.N.fondos.fondos_tipo+"?",this.search=new s.NI(""),this._headerTextService.setTitulo(this.router),this.funcionesObjeto=[{icono:"edit",nombre_boton:"Editar",functionName:"editar"},{icono:"delete",nombre_boton:"Eliminar",functionName:"eliminar"}]}ngOnInit(){this.SearchTextSub$=this._searchService.getSearchText().pipe((0,J.b)(250),(0,U.x)()).subscribe(e=>{this.filtroBusqueda=e,this.tabla.filters(this.filtroBusqueda)}),this.FilterEventSub$=this._searchService.getFilterEvent().subscribe(e=>{this.onFilterMenu(this._searchService.getFilterOrigin())})}onFilterMenu(e){this._menuService.open(E,e._elementRef,{filter:this.filter}).afterClosed().subscribe({next:i=>{i&&(this.filter=i,this.extraParams=-1!=this.filter?.activo?"filter[activo]="+this.filter.activo:"",this.tabla.filters(this.filtroBusqueda))}})}generarAcciones(e){switch(e.name){case"editar":this.updateTipoDeMovimiento(e);break;case"eliminar":this.deleteTipoDeMovimiento(e)}}saveTipoDeMovimiento(){this.dialogo.open(w,{panelClass:"ayuda-dialog"}).afterClosed().subscribe({next:()=>{this.tabla.filters(this.filtroBusqueda)}})}updateTipoDeMovimiento(e){this.dialogo.open(w,{data:e.params.data,panelClass:"my-dialog",autoFocus:!1}).afterClosed().subscribe({next:()=>{this.tabla.filters(this.filtroBusqueda)}})}deleteTipoDeMovimiento(e){this.confirm.open({title:"Eliminar tipo de movimiento "+e.params.data.descripcion,message:"\xbfDesea eliminar la tipo de movimiento: "+e.params.data.descripcion+"?",dismissible:!1,actions:{confirm:{show:!0,color:"warn",label:"Si"},cancel:{show:!0,label:"No"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._tipoDeMovimientosService.deleteTipoMovimiento(e.params.data.idtipo).subscribe({next:a=>{this.alert.success("Tipo de movimiento eliminado con \xe9xito."),i&&this.tabla.renderTabla()},error:a=>{console.error(a),alert("Este Tipo de movimiento no puede eliminarse. Tiene elementos asociados.")}})})}ngOnDestroy(){this._searchService.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(T),t.Y36(d.r),t.Y36(I.R),t.Y36(h.T),t.Y36(b.uw),t.Y36(L.o),t.Y36(f.F0),t.Y36(Q.k))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-tipo-movimientos"]],viewQuery:function(e,i){if(1&e&&t.Gf(F.C,5),2&e){let a;t.iGM(a=t.CRH())&&(i.tabla=a.first)}},inputs:{extraParams:"extraParams"},outputs:{parametrosActualizados:"parametrosActualizados"},decls:9,vars:9,consts:[[1,"w-full","flex","flex-col","relative"],[1,"mb-8","mt-2"],[1,"fixed","right-10"],["mat-icon-button","","type","button","matTooltip","Crear Tipo de movimiento",1,"mr-2","ml-2","bg-blue-500","p-2","rounded-full","z-99999",3,"click"],["save",""],[1,"text-white"],[1,"pr-2","pl-2"],[1,"bottom-10","sm:bottom-0","table-fixed","sm:top-2","w-full","m-0",3,"cache","columnsNames","renderType","columnsParams","endpoint","functions","extraClasses","FiltersLikes","extraParams","functionEmitter"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3,4),t.NdJ("click",function(){return i.saveTipoDeMovimiento()}),t.TgZ(5,"mat-icon",5),t._uU(6,"add"),t.qZA()()()(),t.TgZ(7,"div",6)(8,"app-tabla-dinamica",7),t.NdJ("functionEmitter",function(c){return i.generarAcciones(c)}),t.qZA()()()),2&e&&(t.xp6(8),t.Q6J("cache",!1)("columnsNames",i.headers)("renderType","client")("columnsParams",i.column_params)("endpoint",i.env)("functions",i.funcionesObjeto)("extraClasses","td.mat-cell border,td.mat-cell border-slate-400")("FiltersLikes",i.filtersLike)("extraParams",i.extraParams))},dependencies:[l.RK,p.Hw,Z.gM,F.C]}),n})();var B=o(8995),P=o(1292),R=o(2611),k=o(3873);const O=[{path:"",component:j}];let z=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[T,d.r,h.T],imports:[S.ez,f.Bz.forChild(O),M.p0,l.ot,v.LD,u.lN,s.UX,C.c,p.Ps,A.W,Z.AV,B.Bb,N.g0,P.p9,R.JX,k.f,f.Bz]}),n})()}}]);