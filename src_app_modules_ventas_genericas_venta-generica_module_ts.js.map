{"version":3,"file":"src_app_modules_ventas_genericas_venta-generica_module_ts.js","mappings":"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","sources":["./src/app/modules/ventas/genericas/components/alta-edicion/alta-edicion.component.ts","./src/app/modules/ventas/genericas/components/alta-edicion/alta-edicion.component.html","./src/app/modules/ventas/genericas/components/calcular-unitario/calcular-unitario.component.ts","./src/app/modules/ventas/genericas/components/calcular-unitario/calcular-unitario.component.html","./src/app/modules/ventas/genericas/components/venta-genericas.component.ts","./src/app/modules/ventas/genericas/components/venta-genericas.component.html","./src/app/modules/ventas/genericas/service/venta-generica.service.ts","./src/app/modules/ventas/genericas/venta-generica.module.ts"],"sourcesContent":["import { Component, EventEmitter, Input, OnDestroy, OnInit, Output, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { HeaderTextService } from '@shared/components/header-text/header-text.service';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { debounceTime, distinctUntilChanged, finalize, firstValueFrom, map, Observable, startWith, Subject, Subscription, switchMap, takeUntil, takeWhile, tap, timer } from 'rxjs';\r\nimport { EmpresaService } from '@shared/service/app/empresa.service';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { IFilter } from '@shared/models/filter';\r\nimport { TablaDinamicaComponent } from '@shared/components/tabla-dinamica/tabla-dinamica.component';\r\nimport { MatTableDataSource } from '@angular/material/table';\r\nimport { IAlertConfig } from '@shared/models/alert';\r\nimport { AppAlertService } from '@shared/service/app/alert.service';\r\nimport { DatePipe } from '@angular/common';\r\nimport { IArticulo } from 'app/modules/stock/articulos/models/articulo';\r\nimport { VentaGenericasService } from '../../service/venta-generica.service';\r\nimport { MAT_DATE_FORMATS } from '@angular/material/core';\r\nimport { MY_DATE_FORMATS } from '@shared/constants/date-format';\r\nimport { ICliente } from 'app/modules/administracion/clientes/models/cliente';\r\nimport { IUsuario } from '@core/user/user.types';\r\nimport { ISelectResponse } from '@shared/models/select-response';\r\nimport { IImagenAdjunto } from '@shared/models/imagen-adjunto';\r\nimport { CalcularUnitarioComponent } from '../calcular-unitario/calcular-unitario.component';\r\nimport { IResponse } from '@shared/models/response-with-token';\r\nimport { dtoCalcularItem, dtoCrearVenta, dtoEditarVenta, IItemVenta, IObra, IVenta } from '../../models/venta-generica';\r\nimport { environment } from 'environments/environment';\r\nimport { SaveComponent } from 'app/modules/administracion/clientes/components/save/save.component';\r\n\r\n@Component({\r\n    selector: 'app-alta-edicion-venta',\r\n    templateUrl: './alta-edicion.component.html',\r\n    styleUrls: ['./alta-edicion.component.scss'],\r\n    providers: [{ provide: MAT_DATE_FORMATS, useValue: MY_DATE_FORMATS }]\r\n\r\n})\r\nexport class AltaEdicionVentaComponent implements OnInit, OnDestroy {\r\n    // Necesarios para la app\r\n    title: string;\r\n    user: any;\r\n    public dataSource: MatTableDataSource<any> = new MatTableDataSource();\r\n    showAlert = false;\r\n    _alertConfig: IAlertConfig;\r\n    color_primario: string;\r\n    color_secundario: string;\r\n    configura_obra: boolean;\r\n    default_color: string = 'bg-primary';\r\n    private _unsubscribeAll: Subject<any> = new Subject<any>();\r\n    maxPalabras: number = 150;\r\n    minDate: Date;\r\n    maxDate: Date;\r\n    deposito_default = 0;\r\n    mostrarSpinner = true;\r\n    mostrar_mensaje: boolean = false;\r\n\r\n    @Output() public creadoExitosamente: EventEmitter<void> = new EventEmitter<void>();\r\n    @Output() public editadoExitosamente: EventEmitter<void> = new EventEmitter<void>();\r\n\r\n    // Particulares del modulo\r\n    data: any;\r\n    venta: IVenta;\r\n    obra: IObra;\r\n    form: FormGroup;\r\n    form_obra: FormGroup;\r\n    form_carga_articulos: FormGroup;\r\n    articulos: IArticulo[];\r\n    articulos_list = [];\r\n    clientes: ICliente[];\r\n    vendedores: IUsuario[];\r\n    localidades: ISelectResponse[];\r\n    tratamientos: ISelectResponse[];\r\n    unidades_de_medida: any[] = [];\r\n    lista_de_articulos: any[] = [];\r\n    filteredVendedores: Observable<IUsuario[]>;\r\n    filteredArticulos: Observable<IArticulo[]>;\r\n    filteredClientes: Observable<ISelectResponse[]>;\r\n    filteredLocalidades: Observable<ISelectResponse[]>;\r\n    filteredTratamientos: Observable<ISelectResponse[]>;\r\n    columns = ['articulo', 'unidadmedida', 'cantidad', 'importe_unitario', 'importe_bonificado', 'importe_no_bonificado', 'importe_iva', 'importe_subtotal', 'acciones'];\r\n    funcionesObjeto = null;\r\n    @Input() extraParams = '';\r\n\r\n    totales = {\r\n        importe_iva: 0,\r\n        importe_bonificado: 0,\r\n        importe_no_bonificado: 0,\r\n        importe_subtotal: 0,\r\n    };\r\n\r\n    importe_desuento: number = 0;\r\n\r\n    SearchTextSub$: Subscription;\r\n    FilterEventSub$: Subscription;\r\n    filtroBusqueda: string = '';\r\n    filter: IFilter = {\r\n        tipo: -1,\r\n        rubro: -1\r\n    };\r\n\r\n    titleImagen: boolean;\r\n    protected fileAdjuntoImagen: any;\r\n    protected validExtension = [\r\n        '.jpg',\r\n        '.png',\r\n        '.pdf'\r\n    ];\r\n    selectedFiles: File[] = [];\r\n    imagen: string;\r\n    adjunto: IImagenAdjunto | null = null;\r\n    adjuntos = [];\r\n    selectedOption: string = '';\r\n\r\n    esEdicion = this.route.snapshot.paramMap.get('idventa') ? true : false;\r\n    idventa = Number(this.route.snapshot.paramMap.get('idventa')) ?? null;\r\n\r\n    urlBase = `${environment.baseRest}/`;\r\n\r\n    constructor(\r\n        private _empresaService: EmpresaService,\r\n        private _ventaGenericasService: VentaGenericasService,\r\n        public _headerTextService: HeaderTextService,\r\n        public alert: AppAlertService,\r\n        public dialogo: MatDialog,\r\n        private datePipe: DatePipe,\r\n        public dialogRef: MatDialogRef<AltaEdicionVentaComponent>,\r\n        private router: Router,\r\n        private route: ActivatedRoute\r\n    ) {\r\n        let titulo = this.esEdicion ? { custom_title: true, titulo: `Edicin de Venta Genrica ${this.idventa}` } : { custom_title: true, titulo: 'Alta de Venta Genrica' }\r\n        this._headerTextService.setCustomTitle(titulo);\r\n\r\n        this.user = JSON.parse(localStorage.getItem('user'))\r\n\r\n        // Subscribe to empresa data\r\n        this._empresaService.empresa$\r\n            .pipe(takeUntil(this._unsubscribeAll))\r\n            .subscribe(empresa => {\r\n                this.color_primario = empresa.color_primario;\r\n                this.color_secundario = empresa.color_secundario;\r\n                this.configura_obra = empresa.configura_obra === 1 ? true : false;\r\n            });\r\n\r\n        // Se define minDate como null o cualquier otra fecha lmite que desees permitir hacia atras\r\n        this.minDate = null;\r\n        // Define maxDate como el dia de hoy\r\n        this.maxDate = new Date();\r\n    }\r\n\r\n    @ViewChild(TablaDinamicaComponent) tabla: TablaDinamicaComponent;\r\n\r\n    // Alert\r\n    subscribeAlert() {\r\n        this.alert.emitConfig.subscribe({\r\n            next: (config: IAlertConfig) => {\r\n                this.showAlert = true;\r\n                this._alertConfig = {\r\n                    ...config,\r\n                    appearance: 'border',\r\n                };\r\n                let time = 2;\r\n                timer(100, 1500)\r\n                    .pipe(\r\n                        finalize(() => {\r\n                            this.showAlert = false;\r\n                            this._alertConfig = null;\r\n                        }),\r\n                        takeWhile(() => time > 0),\r\n                        takeUntil(this._unsubscribeAll),\r\n                        tap(() => (time -= 1))\r\n                    )\r\n                    .subscribe();\r\n            },\r\n        });\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        // Load empresa data\r\n        this._empresaService.getEmpresa();\r\n        this.newForm();\r\n        this.loadServices();\r\n\r\n        // Escuchamos los cambios en el control de 'articulo' para filtrar mientras escribe\r\n        this.form_carga_articulos.get('articulo').valueChanges.pipe(\r\n            debounceTime(300),  // Evita demasiadas llamadas consecutivas\r\n            distinctUntilChanged(), // Solo procede si el valor cambia\r\n            switchMap((value) => {\r\n                const idarticulo = typeof value === 'object' ? value.idarticulo : null;\r\n                const filterLike = typeof value === 'string' ? value : null;\r\n                return this._ventaGenericasService.getArticulos(idarticulo, filterLike);\r\n            })\r\n        ).subscribe(response => {\r\n            this.filteredArticulos = response.list;\r\n        });\r\n\r\n        // Escuchamos los cambios del porcentaje de descuento efectivo\r\n        this.form.get('porcentaje_descuento_efectivo').valueChanges.subscribe((porcentaje_descuento_efectivo) => {\r\n            this.updateDescuento(porcentaje_descuento_efectivo);\r\n        });\r\n    }\r\n\r\n    newForm() {\r\n\r\n        this.form = new FormGroup({\r\n            fecha: new FormControl((this.datePipe.transform(new Date(), 'yyyy-MM-dd')), [Validators.required]),\r\n            cliente: new FormControl((''), [Validators.maxLength(this.maxPalabras)]),\r\n            vendedor: new FormControl(('')),\r\n            porcentaje_descuento_efectivo: new FormControl(('')),\r\n            total_venta: new FormControl({ value: '', disabled: true },),\r\n        });\r\n\r\n        if (this.configura_obra) {\r\n            this.form_obra = new FormGroup({\r\n                descripcion_obra: new FormControl((''), Validators.required),\r\n                direccion_obra: new FormControl((''), Validators.required),\r\n                localidad: new FormControl('', Validators.required),\r\n                tratamiento: new FormControl('', Validators.required),\r\n                colocacion: new FormControl(false, Validators.required),\r\n                acarreo: new FormControl(false, Validators.required),\r\n                fecha_entrega: new FormControl((this.datePipe.transform(new Date(), 'yyyy-MM-dd')), [Validators.required]),\r\n                fecha_medicion: new FormControl((this.datePipe.transform(new Date(), 'yyyy-MM-dd')), [Validators.required]),\r\n            });\r\n        }\r\n\r\n        this.form_carga_articulos = new FormGroup({\r\n            articulo: new FormControl((''), Validators.required),\r\n            unidadmedida: new FormControl((''), Validators.required),\r\n            detalle: new FormControl(('')),\r\n            importe_unitario: new FormControl((''), Validators.required),\r\n            cantidad: new FormControl((''), [Validators.required, Validators.min(1)]),\r\n            porcentaje_bonificado: new FormControl((''), Validators.required),\r\n        });\r\n\r\n        this.updateFormValidators();\r\n    }\r\n\r\n    volverPaginaAnterior() {\r\n        this.router.navigate(['/ventas']);\r\n    }\r\n\r\n    // Este mtodo es llamado cuando el componente es destruido\r\n    ngOnDestroy(): void {\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param $event \r\n     * @param cambio_de_foco \r\n     * @param redirect_control \r\n     */\r\n    seleccionItem($event, cambio_de_foco?: boolean, redirect_control?: string) {\r\n\r\n        if ($event.idarticulo) {\r\n            this.form_carga_articulos.get('unidadmedida').enable()\r\n            this.getUnidadesDeMedidaArticulos($event.idarticulo);\r\n\r\n            // Muevo el foco al campo \"cantidad\" luego de un pequeo retraso.\r\n            // Lo encapsulo dentro de `setTimeout` porque espero a que el DOM renderice el input \"cantidad\".\r\n            setTimeout(() => {\r\n                const cantidadField = document.querySelector('[formControlName=\"detalle\"]') as HTMLInputElement;\r\n                cantidadField?.focus();\r\n            }, 1);\r\n        }\r\n\r\n        if ($event && cambio_de_foco === true && redirect_control) {\r\n            // Si es un evento de teclado, evita que se propague\r\n            if ($event instanceof KeyboardEvent) $event.preventDefault();\r\n\r\n            // Muevo el foco al campo \"cantidad\" luego de un pequeo retraso.\r\n            // Lo encapsulo dentro de `setTimeout` porque espero a que el DOM renderice el input \"cantidad\".\r\n            setTimeout(() => {\r\n                const cantidadField = document.querySelector(`[formControlName=${redirect_control}]`) as HTMLInputElement;\r\n                cantidadField?.focus();\r\n            }, 1)\r\n        }\r\n    }\r\n\r\n    /**\r\n    * Funcion para limpiar campos\r\n    */\r\n    limpiarCasillero(input) {\r\n        if (input != 'carga_exitosa') {\r\n            if (this.form.get(input)) {\r\n                this.form.get(input).setValue('');\r\n            } else if (this.form_carga_articulos.get(input)) {\r\n                this.form_carga_articulos.get(input).setValue('');\r\n            } else {\r\n                this.form_obra.get(input).setValue('');\r\n            }\r\n            this.seleccionItem(input, false, 'reset');\r\n        }\r\n\r\n        if (input === 'articulo') {\r\n            this.form_carga_articulos.get('unidadmedida').disable();\r\n            this.form_carga_articulos.get('unidadmedida').setValue('');\r\n            this.form_carga_articulos.get('articulo').setValue('');\r\n            this.form_carga_articulos.get('cantidad').setValue('');\r\n        }\r\n\r\n        if (input === 'carga_exitosa') {\r\n            this.form_carga_articulos.get('articulo').setValue('');\r\n            this.form_carga_articulos.get('unidadmedida').setValue('');\r\n            this.form_carga_articulos.get('cantidad').setValue('');\r\n            this.form_carga_articulos.get('detalle').setValue('');\r\n            this.form_carga_articulos.get('importe_unitario').setValue('');\r\n            this.form_carga_articulos.get('porcentaje_bonificado').setValue('');\r\n        }\r\n    }\r\n\r\n    onCargar($event?: KeyboardEvent) {\r\n        if ($event?.key === 'Enter') {\r\n            $event.preventDefault();\r\n        }\r\n\r\n        if (!this.form_carga_articulos.get('unidadmedida').value || !this.form_carga_articulos.get('articulo').value || !this.form_carga_articulos.get('cantidad').value || !this.form_carga_articulos.get('importe_unitario').value || !this.form_carga_articulos.get('porcentaje_bonificado').value) {\r\n            return this.alert.warning('Por favor, complete todos los campos de la carga de articulo');\r\n        }\r\n\r\n        if (this.form_carga_articulos.get('cantidad').value <= 0) {\r\n            return this.alert.warning('Por favor, Ingrese una cantidad mayor a cero');\r\n        }\r\n\r\n        if (this.form_carga_articulos.get('importe_unitario').value <= 0) {\r\n            return this.alert.warning('Por favor, Ingrese una precio unitario mayor a cero');\r\n        }\r\n\r\n        if (this.form_carga_articulos.get('porcentaje_bonificado').value < 0 || this.form_carga_articulos.get('porcentaje_bonificado').value > 100) {\r\n            return this.alert.warning('Por favor, Ingrese un porcentaje de bonificacin entre cero y cien');\r\n        }\r\n\r\n        if (!this.form_carga_articulos.valid) {\r\n            return this.alert.error('Debe ingresar un Artculo');\r\n        } else {\r\n            let existe_articulo_en_grilla = this.lista_de_articulos.find((item: IItemVenta) => item.idarticulo === this.form_carga_articulos.get('articulo').value.idarticulo && item.idarticulounidadmedida === this.form_carga_articulos.get('unidadmedida').value);\r\n            if (existe_articulo_en_grilla) {\r\n                this.form_carga_articulos.get('unidadmedida').setValue('');\r\n                return this.alert.warning('Ya existe un movimiento de ese articulo con esa unidad de medida.')\r\n            }\r\n\r\n            let articulo: dtoCalcularItem = {\r\n                idarticulo: this.form_carga_articulos.get('articulo').value.idarticulo,\r\n                detalle: this.form_carga_articulos.get('detalle').value,\r\n                cantidad: this.form_carga_articulos.get('cantidad').value,\r\n                precio_unitario: this.form_carga_articulos.get('importe_unitario').value,\r\n                porcentaje_bonificado: this.form_carga_articulos.get('porcentaje_bonificado').value,\r\n                idarticulounidadmedida: this.form_carga_articulos.get('unidadmedida').value,\r\n            }\r\n\r\n            this.addMovimiento(articulo)\r\n        }\r\n\r\n        // Mueve el foco al campo \"articulo\" despus de la carga\r\n        this.form_carga_articulos.get('articulo').reset({ value: '' });\r\n        const articuloField = document.querySelector('[formControlName=\"articulo\"]') as HTMLInputElement;\r\n        articuloField?.focus();\r\n    }\r\n\r\n    onSubmit() {\r\n\r\n        // Se especifica el tipo de base 64\r\n        this.adjuntos = this.adjuntos.map((adjunto: IImagenAdjunto) => {\r\n            return { idventaadjunto: adjunto.idventaadjunto ?? null, path: !adjunto.idventaadjunto ? `data:application/pdf;base64,${adjunto.base64}` : adjunto.path };\r\n        });\r\n\r\n        // Se formatea la lista de articulos para que coincida con el formato deseado agregando \"importe_total\" y eliminando \"importe_subtotal\"\r\n        this.lista_de_articulos = this.lista_de_articulos.map((item: IItemVenta) => {\r\n            item.importe_total = item.importe_subtotal;\r\n            delete item.importe_subtotal;\r\n            return item;\r\n\r\n        });\r\n\r\n        // Se formatea la fecha nuevamente al formato deseado (YYYY-MM-DD)\r\n        const fecha_venta_formateada = this.datePipe.transform(this.form.get('fecha').value, 'yyyy-MM-dd');\r\n\r\n        if (this.configura_obra) {\r\n            const fecha_medicion_formateada = this.datePipe.transform(this.form_obra.get('fecha_medicion').value, 'yyyy-MM-dd');\r\n            const fecha_entrega_formateada = this.datePipe.transform(this.form_obra.get('fecha_entrega').value, 'yyyy-MM-dd');\r\n\r\n            var obra = {\r\n                descripcion: this.form_obra.get('descripcion_obra').value,\r\n                direccion: this.form_obra.get('direccion_obra').value,\r\n                idlocalidad: parseInt(this.form_obra.get('localidad').value.id),\r\n                idtratamiento: parseInt(this.form_obra.get('tratamiento').value.id),\r\n                fecha_medicion: fecha_medicion_formateada,\r\n                fecha_entrega: fecha_entrega_formateada,\r\n                colocacion: this.form_obra.get('colocacion').value ? 1 : 0,\r\n                acarreo: this.form_obra.get('acarreo').value ? 1 : 0\r\n            }\r\n        }\r\n\r\n        // Se crea el payload con los datos necesarios para crear una venta\r\n        const payload: dtoCrearVenta | dtoEditarVenta = {\r\n            venta: {\r\n                idcliente: parseInt(this.form.get('cliente').value.id),\r\n                idusuario: this.form.get('vendedor').value.codigo,\r\n                fecha: fecha_venta_formateada,\r\n                importe_total: this.form.get('total_venta').value,\r\n                importe_bonificado: this.totales.importe_bonificado,\r\n                importe_no_bonificado: this.totales.importe_no_bonificado,\r\n                importe_iva: this.totales.importe_iva.toString(),\r\n                porcentaje_descuento: this.form.get('porcentaje_descuento_efectivo').value ? this.form.get('porcentaje_descuento_efectivo').value : 0,\r\n                importe_descuento: this.importe_desuento\r\n            },\r\n            obra: this.configura_obra ? obra : null,\r\n            items: this.lista_de_articulos,\r\n            adjuntos: this.adjuntos,\r\n        }\r\n\r\n        if (this.esEdicion) {\r\n            this._ventaGenericasService.updateVenta(this.idventa, payload)\r\n                .subscribe({\r\n                    next: (data) => {\r\n                        if (data) {\r\n                            this.editadoExitosamente.emit();\r\n                            this.volverPaginaAnterior();\r\n                        }\r\n                    }\r\n                });\r\n        } else {\r\n            this._ventaGenericasService.saveVenta(payload)\r\n                .subscribe({\r\n                    next: (data) => {\r\n                        if (data) {\r\n                            this.creadoExitosamente.emit();\r\n                            this.volverPaginaAnterior();\r\n                        }\r\n                    }\r\n                });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Metodo para calcular el precio unitario de un item\r\n     * @returns \r\n     */\r\n    calcularPrecioUnitario() {\r\n        const articuloSeleccionado = this.form_carga_articulos.get('articulo').value;\r\n\r\n        if (!articuloSeleccionado) {\r\n            return this.alert.error('Seleccione un artculo vlido');\r\n        }\r\n\r\n        // Abre el dilogo\r\n        this.dialogo\r\n            .open(CalcularUnitarioComponent, {\r\n                data: articuloSeleccionado,\r\n                panelClass: 'ayuda-dialog',\r\n            })\r\n            .afterClosed()\r\n            .subscribe({\r\n                next: (data: IResponse<any>) => {\r\n                    if (data) {\r\n                        this.form_carga_articulos.get('importe_unitario').setValue(data.result);\r\n                        // Notifica al usuario\r\n                        this.alert.success('Se calculo el precio unitario');\r\n                    }\r\n                },\r\n                error: (error) => {\r\n                    console.error('Error al calcular el precio unitario:', error);\r\n                    this.alert.error('Ocurri un error al calcular el precio unitario');\r\n                },\r\n            });\r\n    }\r\n\r\n    cargarNuevoCliente() {\r\n        // Abre el dilogo\r\n        this.dialogo\r\n            .open(SaveComponent, {\r\n                panelClass: 'ayuda-dialog',\r\n            })\r\n            .afterClosed()\r\n            .subscribe({\r\n                next: (data: IResponse<any>) => {\r\n                    if (data) {\r\n                        this.form.get('cliente').setValue(data.result);\r\n                        // Notifica al usuario\r\n                        this.alert.success('El cliente fue creado con xito');\r\n                        this.getClientes();\r\n                    }\r\n                },\r\n                error: (error) => {\r\n                    console.error('Error al crear cliente:', error);\r\n                    this.alert.error('Ocurri un error al crear cliente');\r\n                },\r\n            });\r\n    }\r\n\r\n    // ################# Carga De Movimientos #################\r\n\r\n    /**\r\n     * Esta funcion aade un nuevo item a la grilla dentro del saveComponent.\r\n     * @var movimiento_articulo Encapsula un objeto con los datos que deseamos mostrar en la tabla.\r\n     */\r\n    async addMovimiento(item) {\r\n        // Obtengo el arituclo calculado\r\n        const ItemVenta: IResponse<IItemVenta> = await firstValueFrom(this._ventaGenericasService.calcularItem(item));\r\n\r\n        // Si la operacion fue exitosa...\r\n        if (ItemVenta.success) {\r\n            // Encapsulo los datos del articulo en un objeto\r\n            let item_venta: IItemVenta = {\r\n                ...ItemVenta.result,\r\n            }\r\n\r\n            this.lista_de_articulos = [item_venta, ...this.lista_de_articulos]; // Se agrega el nuevo articulo al comienzo de la lista para que siempre aparezca primero en la grilla\r\n            this.dataSource = new MatTableDataSource(this.lista_de_articulos); //Actualizo la tabla\r\n\r\n            // Actualizar validaciones segn el estado de la grilla\r\n            this.updateFormValidators();\r\n            this.updateTotal();\r\n\r\n            this.limpiarCasillero('carga_exitosa'); // Limpio casillerros para que este listo para volver a cargar\r\n            this.alert.success(\"Artculo aadido con xito\");\r\n        } else {\r\n            return this.alert.error(\"Ocurri un error al aadir el artculo\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * El resultado de esta operacin es un nuevo \r\n     * array que contiene todos los elementos de la lista original, \r\n     * excepto el artculo que se desea eliminar.\r\n     * @param articulo \r\n     */\r\n    deleteMovimiento(articulo) {\r\n        this.lista_de_articulos = this.lista_de_articulos.filter((item) => { return item !== articulo });\r\n        this.dataSource = new MatTableDataSource(this.lista_de_articulos);\r\n\r\n        // Actualizamos el valor total de la carga\r\n        this.updateTotal();\r\n\r\n        this.alert.success(\"Artculo eliminado con xito\")\r\n    }\r\n\r\n    // ################# Metodos de comunicacion con el service #################\r\n\r\n    /**\r\n    * Este metodo ejecuta todas las peticiones asincronas al mismo tiempo\r\n    */\r\n    async loadServices() {\r\n        await Promise.all([\r\n            this.getArticulos(),\r\n            this.getClientes(),\r\n            this.getVendedores(),\r\n            this.configura_obra ? this.getLocalidades() : Promise.resolve(),\r\n            this.configura_obra ? this.getTratamientos() : Promise.resolve(),\r\n            this.esEdicion ? this.getDatosVenta() : Promise.resolve()\r\n        ]).then(() => {\r\n            this.mostrarSpinner = false;\r\n        })\r\n    }\r\n\r\n    async getDatosVenta() {\r\n        const Venta = await firstValueFrom(this._ventaGenericasService.getDatosVenta(this.idventa));\r\n        new Promise(async (resolve) => {\r\n            this.venta = Venta.list.venta;\r\n            this.lista_de_articulos = Venta.list.items.map((item: IItemVenta) => {\r\n                item.importe_subtotal = item.importe_total\r\n                return item;\r\n            });\r\n\r\n            this.adjuntos = Venta.list.adjuntos.map((item: IImagenAdjunto) => {\r\n                return item;\r\n            });\r\n\r\n            this.obra = Venta.list.obra ?? null;\r\n\r\n            this.dataSource = new MatTableDataSource(this.lista_de_articulos); //Actualizo la tabla\r\n\r\n            // Rellena los formularios con los datos obtenidos\r\n            this.form.patchValue({\r\n                fecha: this.venta.fecha,\r\n                cliente: { id: this.venta.idcliente, descripcion: this.venta.descripcion_cliente },\r\n                vendedor: { id: this.venta.idusuario, descripcion: this.venta.descripcion_usuario },\r\n                porcentaje_descuento_efectivo: Number(this.venta.porcentaje_descuento),\r\n                total_venta: this.venta.total\r\n            });\r\n\r\n            if (this.configura_obra) {\r\n                this.form_obra.patchValue({\r\n                    descripcion_obra: this.obra?.descripcion ?? '',\r\n                    direccion_obra: this.obra?.direccion ?? '',\r\n                    localidad: { id: this.obra.idlocalidad, descripcion: this.obra.descripcion_localidad },\r\n                    tratamiento: { id: this.obra.idtratamiento, descripcion: this.obra.descripcion_tratamiento },\r\n                    colocacion: this.obra?.colocacion ? true : false,\r\n                    acarreo: this.obra?.acarreo ? true : false,\r\n                    fecha_entrega: this.datePipe.transform(this.obra?.fecha_entrega, 'yyyy-MM-dd'),\r\n                    fecha_medicion: this.datePipe.transform(this.obra?.fecha_medicion, 'yyyy-MM-dd'),\r\n                });\r\n            }\r\n\r\n            this.updateTotal();\r\n\r\n            // Oculto el spinner\r\n            this.mostrarSpinner = false;\r\n            resolve(true);\r\n        })\r\n    }\r\n\r\n    async getClientes(option?) {\r\n        const Clientes = await firstValueFrom(this._ventaGenericasService.getClientes(option));\r\n        new Promise(async (resolve) => {\r\n            this.clientes = Clientes.list;\r\n            this.filteredClientes = this.form.get('cliente').valueChanges.pipe(\r\n                startWith(''),\r\n                map((value) => this._filterSelect(value, 'clientes')),\r\n            );\r\n\r\n            // Oculto el spinner\r\n            this.mostrarSpinner = false;\r\n            resolve(true);\r\n        })\r\n    };\r\n\r\n    async getLocalidades(option?) {\r\n        const Localidades = await firstValueFrom(this._ventaGenericasService.getLocalidades());\r\n        new Promise(async (resolve) => {\r\n            this.localidades = Localidades.list;\r\n            this.filteredLocalidades = this.form_obra.get('localidad').valueChanges.pipe(\r\n                startWith(''),\r\n                map((value) => this._filterSelect(value, 'localidades')),\r\n            );\r\n\r\n            // Oculto el spinner\r\n            this.mostrarSpinner = false;\r\n            resolve(true);\r\n        })\r\n    };\r\n\r\n    async getTratamientos(option?) {\r\n        const Tratamientos = await firstValueFrom(this._ventaGenericasService.getTratamiendos());\r\n        new Promise(async (resolve) => {\r\n            this.tratamientos = Tratamientos.list;\r\n            this.filteredTratamientos = this.form_obra.get('tratamiento').valueChanges.pipe(\r\n                startWith(''),\r\n                map((value) => this._filterSelect(value, 'tratamientos')),\r\n            );\r\n\r\n            // Oculto el spinner\r\n            this.mostrarSpinner = false;\r\n            resolve(true);\r\n        })\r\n    };\r\n\r\n    async getVendedores(option?) {\r\n        const Vendedores = await firstValueFrom(this._ventaGenericasService.getVendedores(option));\r\n        new Promise(async (resolve) => {\r\n            this.vendedores = Vendedores['list'];\r\n            this.filteredVendedores = this.form.get('vendedor').valueChanges.pipe(\r\n                startWith(''),\r\n                map((value) => this._filterVendodres(value)),\r\n            );\r\n\r\n            // Oculto el spinner\r\n            this.mostrarSpinner = false;\r\n            resolve(true);\r\n        })\r\n    };\r\n\r\n    async getArticulos() {\r\n        const articulos = await firstValueFrom(this._ventaGenericasService.getArticulos());\r\n        new Promise(async (resolve) => {\r\n            this.articulos = articulos.list;\r\n            this.articulos_list = this.articulos;\r\n            this.filteredArticulos = this.form_carga_articulos.get('articulo').valueChanges.pipe(\r\n                startWith(''),\r\n                map((value) => this._filterArticulos(value)),\r\n            );\r\n            resolve(true);\r\n        });\r\n    }\r\n\r\n    async getUnidadesDeMedidaArticulos(idarticulo) {\r\n        const unidadesDeMedida = await firstValueFrom(this._ventaGenericasService.getUnidadesDeMedidaArticulos(idarticulo));\r\n        new Promise(async (resolve) => {\r\n            let um_base; // Asigno una variable global para que cada UM sepa cual es la um base (factor = '1.00')\r\n            this.unidades_de_medida = unidadesDeMedida.list.sort((a, b) => a.factor - b.factor).map(unidad => {\r\n                //Convierto en numero\r\n                unidad.factor = parseFloat(unidad.factor);\r\n\r\n                // Almaceno solo la um base de un articulo \r\n                if (unidad.factor === 1) {\r\n                    um_base = unidad.um.descripcion;\r\n                }\r\n\r\n                return { idarticulounidadmedida: unidad.idarticulounidadmedida, idunidadmedida: unidad.idunidadmedida, descripcion_um: unidad.um.descripcion, factor_um: unidad.factor, um_base: um_base }\r\n            });\r\n\r\n            // Autoasigna la primera unidad de medida al control del formulario\r\n            if (this.unidades_de_medida.length > 0) {\r\n                this.form_carga_articulos.get('unidadmedida').setValue(this.unidades_de_medida[0].idarticulounidadmedida);\r\n                this.seleccionItem({ um: this.unidades_de_medida[0].idarticulounidadmedida });\r\n            }\r\n            resolve(true);\r\n        })\r\n    }\r\n\r\n    // ################# Metodo de filtrado para inputs autocomplete #################\r\n\r\n    /**\r\n    * Esta funcion es para filtrar los artculos segn el input que se haya ingresado en el buscador de articulos.\r\n    * @param value \r\n    * @returns \r\n    */\r\n    private _filterArticulos(value: string): IArticulo[] {\r\n        const filterValue = value.toString().toLowerCase();\r\n        return this.articulos_list.filter(articulo => {\r\n            const codigo_interno = articulo.codigo_interno.toString().toLowerCase().includes(filterValue);\r\n            const descripcion = articulo.descripcion.toString().toLowerCase().includes(filterValue);\r\n            return codigo_interno || descripcion;\r\n        });\r\n    }\r\n\r\n    private _filterVendodres(vendedor: IUsuario): IUsuario[] {\r\n        const filterValue = vendedor.toString().toLowerCase();\r\n        return this.vendedores.filter(vendedor => vendedor.nombre.toLowerCase().includes(filterValue));\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param item Valor a buscar\r\n     * @param model Modelo donde se retorna la lista de valores encontrados\r\n     * @returns Valores encontrados en la lista\r\n     */\r\n    private _filterSelect(item: ISelectResponse, model?: string): ISelectResponse[] {\r\n        const filterValue = item.toString().toLowerCase();\r\n        return this[`${model}`].filter(item => item.descripcion.toLowerCase().includes(filterValue));\r\n    }\r\n\r\n    // ################# Metodos para obtener textos de input #################\r\n\r\n    getTextGenerico(option) {\r\n        if (option.RazonSocial || option.razonSocial) return option ? option.RazonSocial || option.razonSocial : '';\r\n\r\n        if (option.descripcion) return option ? option.descripcion : '';\r\n\r\n        if (option.nick) return option ? `${option.nombre} ${option.apellido}` : '';\r\n    }\r\n\r\n    /**\r\n    * Obtenemos la descripcion del articulo seleccionado.\r\n    * @param articulo \r\n    * @returns \r\n    */\r\n    getTextArticulo(articulo: IArticulo): string {\r\n        return articulo?.idarticulo ? `${articulo.codigo_interno} - ${articulo.descripcion}` : '';\r\n    }\r\n\r\n    /**\r\n    * Este metodo sirve para agregar o quitar las validaciones de requeridos a los campos del formulario de carga de articulos.\r\n    */\r\n    updateFormValidators() {\r\n        if (this.lista_de_articulos.length === 0) {\r\n            // Si la grilla est vaca, hacer que los campos sean requeridos\r\n            this.form_carga_articulos.get('articulo').setValidators(Validators.required);\r\n            this.form_carga_articulos.get('cantidad').setValidators([Validators.required, Validators.min(1)]);\r\n            this.form_carga_articulos.get('unidadmedida').setValidators(Validators.required);\r\n            this.form_carga_articulos.get('importe_unitario').setValidators(Validators.required);\r\n            this.form_carga_articulos.get('porcentaje_bonificado').setValidators(Validators.required);\r\n        } else {\r\n            // Si hay elementos en la grilla, quitar la validacin de requerido\r\n            this.form_carga_articulos.get('articulo').clearValidators();\r\n            this.form_carga_articulos.get('cantidad').setValidators(Validators.min(1));\r\n            this.form_carga_articulos.get('unidadmedida').clearValidators();\r\n            this.form_carga_articulos.get('importe_unitario').clearValidators();\r\n            this.form_carga_articulos.get('porcentaje_bonificado').clearValidators();\r\n        }\r\n\r\n        // Asegurarse de que Angular reevale las validaciones\r\n        this.form_carga_articulos.get('articulo').updateValueAndValidity();\r\n        this.form_carga_articulos.get('cantidad').updateValueAndValidity();\r\n        this.form_carga_articulos.get('unidadmedida').updateValueAndValidity();\r\n        this.form_carga_articulos.get('importe_unitario').updateValueAndValidity();\r\n        this.form_carga_articulos.get('porcentaje_bonificado').updateValueAndValidity();\r\n    }\r\n\r\n    /**\r\n    * Metodo para calcular el valor total entre todos los subtotales de una grilla\r\n    */\r\n    updateTotal() {\r\n        const importe_bonificado = this.lista_de_articulos.reduce((sum, item) => {\r\n            const importe_bonificado = Number(item.importe_bonificado) || 0;\r\n            return sum + importe_bonificado;\r\n        }, 0);\r\n\r\n        const importe_no_bonificado = this.lista_de_articulos.reduce((sum, item) => {\r\n            const importe_no_bonificado = Number(item.importe_no_bonificado) || 0;\r\n            return sum + importe_no_bonificado;\r\n        }, 0);\r\n\r\n        const importe_iva = this.lista_de_articulos.reduce((sum, item) => {\r\n            const importe_iva = Number(item.importe_iva) || 0;\r\n            return sum + importe_iva;\r\n        }, 0);\r\n\r\n        const importe_subtotal = this.lista_de_articulos.reduce((sum, item) => {\r\n            const importe_subtotal = Number(item.importe_subtotal) || 0;\r\n            return sum + importe_subtotal;\r\n        }, 0);\r\n\r\n        const total_venta = this.lista_de_articulos.reduce((sum, item) => {\r\n            const subtotal = Number(item.importe_subtotal) || 0;\r\n            return sum + subtotal;\r\n        }, 0);\r\n\r\n        this.totales = {\r\n            importe_iva: parseFloat((importe_iva).toFixed(2)),\r\n            importe_bonificado: parseFloat((importe_bonificado).toFixed(2)),\r\n            importe_no_bonificado: parseFloat((importe_no_bonificado).toFixed(2)),\r\n            importe_subtotal: parseFloat((importe_subtotal).toFixed(2))\r\n        };\r\n\r\n        this.form.get('total_venta')?.setValue(total_venta, { emitEvent: false });\r\n    }\r\n\r\n    /**\r\n     * Metodo para actualizar el total de la venta basado en el porcentaje de descuento efectivo\r\n     * @param porcentaje_descuento_efectivo \r\n     */\r\n    updateDescuento(porcentaje_descuento_efectivo) {\r\n        this.updateTotal();\r\n\r\n        this.totales.importe_bonificado = this.calcularDescuento(this.totales.importe_bonificado, porcentaje_descuento_efectivo);\r\n        this.totales.importe_no_bonificado = this.calcularDescuento(this.totales.importe_no_bonificado, porcentaje_descuento_efectivo);\r\n        this.totales.importe_subtotal = this.calcularDescuento(this.totales.importe_subtotal, porcentaje_descuento_efectivo);\r\n        this.totales.importe_iva = this.calcularDescuento(this.totales.importe_iva, porcentaje_descuento_efectivo);\r\n\r\n        // Obtiene el total de la venta\r\n        const total_venta = this.form.get('total_venta').value;\r\n        // Calcula el descuento basado en el porcentaje\r\n        const nuevoTotal = this.calcularDescuento(total_venta, porcentaje_descuento_efectivo);\r\n\r\n        // Actualiza el campo total\r\n        this.form.get('total_venta')?.setValue(nuevoTotal >= 0 ? nuevoTotal : this.updateTotal()); // Evita valores negativos\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param total Valor general\r\n     * @param porcentaje_descuento Porcentaje por el cual queremos obtener el valor \r\n     * @returns nuevo total con descuento\r\n     */\r\n    calcularDescuento(total: number, porcentaje_descuento: number) {\r\n        const descuento = (total * porcentaje_descuento) / 100;\r\n        this.importe_desuento = descuento;\r\n\r\n        return parseFloat((total - descuento).toFixed(2));\r\n    }\r\n\r\n    /**\r\n    * Filtro para buscar en la grilla de articulos\r\n    * @param filterValue \r\n    */\r\n    applyFilter(filterValue: string): void {\r\n        this.dataSource.filter = filterValue.trim().toLowerCase();\r\n    }\r\n\r\n    /**\r\n     * Metodo para en la edicion setear el porcentaje original si el input esta vacio\r\n     * @param $event \r\n     */\r\n    onBlurInput($event) {\r\n        const input = $event.target as HTMLInputElement;\r\n        const valor = input?.value;\r\n\r\n        // Verifica si el valor es null o una cadena vaca\r\n        if (!valor || valor === '') {\r\n            // Asigna un valor por defecto\r\n            this.form.get('porcentaje_descuento_efectivo').setValue(Number(this.venta?.porcentaje_descuento));\r\n        }\r\n    }\r\n\r\n    /**\r\n    * \r\n    * @param $event Archivo\r\n    * @param tipo_imagen 0: imagen principal, 1: imagen secundaria\r\n    */\r\n    setImagen($event: Event, tipo_imagen: number) {\r\n        const imagen_data = ($event.target as HTMLInputElement).files[0];\r\n\r\n        let size = Math.round(imagen_data.size / 1024); // Convierto el tamano de la imagen a kilobytes\r\n        let nombre_archivo = imagen_data.name; // Encapsulo el nombre del archivo\r\n        let extension_archivo = nombre_archivo.split('.').pop(); // Obtengo la extension del archivo\r\n\r\n        this.getBase64(imagen_data).then((imagen_en_base_64) => {\r\n            // Valido el formato del archivo\r\n            if (!this.validExtension.includes('.' + extension_archivo)) {\r\n                return this.alert.info(\"Formato de archivo no soportado\");\r\n            }\r\n\r\n            // Encapsulo los valores que me interesan de la imagen\r\n            let data = {\r\n                base64: imagen_en_base_64.toString().split(\"base64,\")[1],\r\n                path: nombre_archivo,\r\n                size: size,\r\n                extension: extension_archivo\r\n            }\r\n\r\n            // Si es de tipo_imagen \"principal\"...\r\n            if (tipo_imagen === 0) {\r\n                // Guardo la informacion en una variable global\r\n                this.adjuntos = [data, ...this.adjuntos];\r\n            }\r\n        });\r\n    }\r\n\r\n    async getBase64(file: any): Promise<any> {\r\n        return new Promise((resolve, reject) => {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n            reader.onload = () => resolve(reader.result);\r\n            reader.onerror = error => reject(error);\r\n        });\r\n    }\r\n\r\n    getFileNameFromUrl(url: string): string {\r\n        // Divide la URL en partes utilizando el carcter \"/\"\r\n        const parts = url.split('/');\r\n        // El ltimo elemento del array es el nombre del archivo\r\n        const fileName = parts[parts.length - 1];\r\n        return fileName;\r\n    }\r\n\r\n    getFileSize(size: number): string {\r\n        const bytes = size;\r\n        const kilobytes = bytes / 1024;\r\n        if (kilobytes < 1024) {\r\n            return kilobytes.toFixed(2) + ' KB';\r\n        } else {\r\n            const megabytes = kilobytes / 1024;\r\n            return megabytes.toFixed(2) + ' MB';\r\n        }\r\n    }\r\n\r\n    getFileTitle(file: File): string {\r\n        return file.name + ' (' + this.getFileSize(file.size) + ')';\r\n    }\r\n\r\n    /**\r\n     * Metodo parametrizado para eliminar los archivos multimedia segun el momento de persistencia\r\n     * @param tipo Tipo de imagen que se quiere eliminar\r\n     * @param file Archivo a eliminar\r\n     */\r\n    removeFile(tipo: string, file: any) {\r\n        switch (tipo) {\r\n            // Eliminar imagenes secundarias dadas de alta en la operacion actual\r\n            case 'adjuntos':\r\n                {\r\n                    this.adjuntos = this.adjuntos.filter((adjunto) => adjunto.path.toLowerCase() != file.path.toLowerCase());\r\n                }\r\n                break;\r\n\r\n            default: {\r\n                console.error('Ocurri un error al quitar el adjunto.')\r\n            }\r\n        }\r\n    }\r\n}","<div class=\"w-full flex flex-col relative mt-4 overflow-y-auto h-full\">\r\n    <div class=\"flex justify-start sm:mb-0 mx-4\">\r\n        <button [class]=\"color_primario ? '' : default_color\" [style.border]=\"color_primario || '' \"\r\n            [style.color]=\"color_primario || '' \"\r\n            class=\"fuse-mat-button-large w-full !border border-solid xl:w-28 md:w-20\" mat-flat-button\r\n            (click)=\"volverPaginaAnterior()\">\r\n            <mat-icon class=\"xl:icon-size-5 icon-size-3\" [svgIcon]=\"'heroicons_solid:chevron-left'\"></mat-icon>\r\n            <span class=\"ml-2 xl:text-xl text-sm font-normal\">Volver</span>\r\n        </button>\r\n    </div>\r\n\r\n    <!-- Spinner -->\r\n    <spinner-component *ngIf=\"mostrarSpinner\"></spinner-component>\r\n\r\n    <!-- Alert -->\r\n    <fuse-alert class=\"fixed top-0 left-0 w-full flex justify-center items-center mt-8 alert-main z-99999\"\r\n        [type]=\"_alertConfig.type\" [appearance]=\"'outline'\" *ngIf=\"showAlert\" [@fadeIn]=\"showAlert\">\r\n        {{ _alertConfig.message }}\r\n    </fuse-alert>\r\n\r\n    <form class=\"form-menu p-4\" [formGroup]=\"form\">\r\n        <div class=\"flex flex-col w-full h-full p-4 \">\r\n\r\n            <!-- Carga de venta -->\r\n            <div class=\"flex gap-2 flex-col sm:flex-row\">\r\n                <mat-form-field appearance='fill' class=\"w-full sm:w-2/3\">\r\n                    <mat-label>Fecha de Venta</mat-label>\r\n                    <input matInput [matDatepicker]=\"picker\" formControlName=\"fecha\" readonly=\"true\" [min]=\"minDate\"\r\n                        [max]=\"maxDate\" />\r\n                    <mat-datepicker-toggle matSuffix [for]=\"picker\"></mat-datepicker-toggle>\r\n                    <mat-datepicker #picker></mat-datepicker>\r\n                </mat-form-field>\r\n\r\n                <div class=\" w-full flex\">\r\n                    <mat-form-field apparance='fill' class=\" w-3/4\">\r\n                        <mat-label>Cliente</mat-label>\r\n                        <input type=\"text\" matInput formControlName=\"cliente\" [matAutocomplete]=\"auto_cliente\" (keydown.enter)=\"seleccionItem($event, true, 'vendedor')\">\r\n                        <button mat-icon-button matSuffix type=\"button\" class=\"mr-2\" *ngIf=\"!form.get('cliente').value\">\r\n                            <mat-icon>arrow_drop_down</mat-icon>\r\n                        </button>\r\n                        <mat-autocomplete autoActiveFirstOption #auto_cliente=\"matAutocomplete\"\r\n                            [displayWith]=\"getTextGenerico\">\r\n                            <mat-option *ngFor=\"let cliente of filteredClientes | async \" [value]=\"cliente\" (click)=\"seleccionItem($event, true, 'vendedor')\">\r\n                                {{ cliente.descripcion }}\r\n                            </mat-option>\r\n                        </mat-autocomplete>\r\n                        <button matSuffix mat-icon-button (click)=\"limpiarCasillero('cliente')\" class=\"mr-2\"\r\n                            *ngIf=\"form.get('cliente').value\">\r\n                            <mat-icon>clear</mat-icon>\r\n                        </button>\r\n                    </mat-form-field>\r\n                    <div class=\"flex w-1/4 justify-center items-center\">\r\n                        <button [class]=\"color_primario ? '' : default_color\" [style.background]=\"color_primario\"\r\n                            matTooltip='Aadir'\r\n                            class=\"flex items-center justify-center w-10 h-10 rounded-full mt-2 ml-2 sm:ml-4 transition-transform transform active:scale-95\"\r\n                            (click)=\"cargarNuevoCliente()\">\r\n                            <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\"\r\n                                xmlns=\"http://www.w3.org/2000/svg\">\r\n                                <path d=\"M16 10H10V16H6V10H0V6H6V0H10V6H16V10Z\" fill=\"white\" />\r\n                            </svg>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                <mat-form-field apparance='fill' class=\" w-full sm:w-2/3\">\r\n                    <mat-label>Vendedor</mat-label>\r\n                    <input type=\"text\" matInput formControlName=\"vendedor\" [matAutocomplete]=\"auto_vendedor\" (keydown.enter)=\"seleccionItem($event, true, 'descripcion_obra')\">\r\n                    <button mat-icon-button matSuffix type=\"button\" class=\"mr-2\" *ngIf=\"!form.get('vendedor').value\">\r\n                        <mat-icon>arrow_drop_down</mat-icon>\r\n                    </button>\r\n                    <mat-autocomplete autoActiveFirstOption #auto_vendedor=\"matAutocomplete\"\r\n                        [displayWith]=\"getTextGenerico\">\r\n                        <mat-option *ngFor=\"let vendedor of filteredVendedores | async\" [value]=\"vendedor\" (click)=\"seleccionItem($event, true, 'descripcion_obra')\">\r\n                            {{ vendedor.nombre}} {{ vendedor.apellido }}\r\n                        </mat-option>\r\n                    </mat-autocomplete>\r\n                    <button matSuffix mat-icon-button (click)=\"limpiarCasillero('vendedor')\" class=\"mr-2\"\r\n                        *ngIf=\"form.get('vendedor').value\">\r\n                        <mat-icon>clear</mat-icon>\r\n                    </button>\r\n                </mat-form-field>\r\n            </div>\r\n\r\n            <!-- Carga de obra -->\r\n            <form *ngIf=\"configura_obra\" [formGroup]=\"form_obra\">\r\n                <div class=\"flex gap-2 flex-col sm:flex-row\">\r\n                    <mat-form-field apparance='fill' class=\"  w-full sm:w-full\">\r\n                        <mat-label>Obra</mat-label>\r\n                        <input type=\"text\" matInput formControlName=\"descripcion_obra\"\r\n                            (keydown.enter)=\"seleccionItem($event, true,'direccion_obra')\">\r\n                        <button matSuffix mat-icon-button (click)=\"limpiarCasillero('descripcion_obra')\" class=\"mr-2\"\r\n                            *ngIf=\"form_obra.get('descripcion_obra').value\">\r\n                            <mat-icon>clear</mat-icon>\r\n                        </button>\r\n                    </mat-form-field>\r\n                    <mat-form-field apparance='fill' class=\"  w-full sm:w-full\">\r\n                        <mat-label>Direccin Obra</mat-label>\r\n                        <input type=\"text\" matInput formControlName=\"direccion_obra\"\r\n                            (keydown.enter)=\"seleccionItem($event, true,'localidad')\">\r\n                        <button matSuffix mat-icon-button (click)=\"limpiarCasillero('direccion_obra')\" class=\"mr-2\"\r\n                            *ngIf=\"form_obra.get('direccion_obra').value\">\r\n                            <mat-icon>clear</mat-icon>\r\n                        </button>\r\n                    </mat-form-field>\r\n                    <mat-form-field apparance='fill' class=\" w-full sm:w-3/4\">\r\n                        <mat-label>Localidad - Provincia</mat-label>\r\n                        <input type=\"text\" matInput formControlName=\"localidad\" [matAutocomplete]=\"auto_localidad\" (keydown.enter)=\"seleccionItem($event, true, 'tratamiento')\">\r\n                        <button mat-icon-button matSuffix type=\"button\" class=\"mr-2\"\r\n                            *ngIf=\"!form_obra.get('localidad').value\">\r\n                            <mat-icon>arrow_drop_down</mat-icon>\r\n                        </button>\r\n                        <mat-autocomplete autoActiveFirstOption #auto_localidad=\"matAutocomplete\"\r\n                            [displayWith]=\"getTextGenerico\">\r\n                            <mat-option *ngFor=\"let localidad of filteredLocalidades | async\" [value]=\"localidad\" (click)=\"seleccionItem($event, true, 'tratamiento')\">\r\n                                {{ localidad.descripcion }}\r\n                            </mat-option>\r\n                        </mat-autocomplete>\r\n                        <button matSuffix mat-icon-button (click)=\"limpiarCasillero('localidad')\" class=\"mr-2\"\r\n                            *ngIf=\"form_obra.get('localidad').value\">\r\n                            <mat-icon>clear</mat-icon>\r\n                        </button>\r\n                    </mat-form-field>\r\n                </div>\r\n                <div class=\"flex gap-2 flex-col sm:flex-row\">\r\n                    <mat-form-field apparance='fill' class=\" w-full sm:w-3/4\">\r\n                        <mat-label>Tratamiento</mat-label>\r\n                        <input type=\"text\" matInput formControlName=\"tratamiento\" [matAutocomplete]=\"auto_tratamiento\" (keydown.enter)=\"seleccionItem($event, true, 'articulo')\">\r\n                        <button mat-icon-button matSuffix type=\"button\" class=\"mr-2\"\r\n                            *ngIf=\"!form_obra.get('tratamiento').value\">\r\n                            <mat-icon>arrow_drop_down</mat-icon>\r\n                        </button>\r\n                        <mat-autocomplete autoActiveFirstOption #auto_tratamiento=\"matAutocomplete\"\r\n                            [displayWith]=\"getTextGenerico\">\r\n                            <mat-option *ngFor=\"let tratamiento of filteredTratamientos | async\" [value]=\"tratamiento\" (click)=\"seleccionItem($event, true, 'articulo')\">\r\n                                {{ tratamiento.descripcion }}\r\n                            </mat-option>\r\n                        </mat-autocomplete>\r\n                        <button matSuffix mat-icon-button (click)=\"limpiarCasillero('tratamiento')\" class=\"mr-2\"\r\n                            *ngIf=\"form_obra.get('tratamiento').value\">\r\n                            <mat-icon>clear</mat-icon>\r\n                        </button>\r\n                    </mat-form-field>\r\n                    <div class=\"flex justify-between items-center gap-2\">\r\n                        <div class=\"flex items-center space-x-2\">\r\n                            <mat-checkbox formControlName=\"acarreo\"></mat-checkbox>\r\n                            <mat-label>Acarreo</mat-label>\r\n                        </div>\r\n                        <div class=\"flex items-center space-x-2\">\r\n                            <mat-checkbox formControlName=\"colocacion\"></mat-checkbox>\r\n                            <mat-label>Colocacin</mat-label>\r\n                        </div>\r\n                    </div>\r\n                    <mat-form-field appearance='fill' class=\"w-full sm:w-2/3\">\r\n                        <mat-label>Fecha de Medicin</mat-label>\r\n                        <input matInput [matDatepicker]=\"picker_medicion\" formControlName=\"fecha_medicion\" readonly=\"true\"\r\n                            [min]=\"maxDate\" />\r\n                        <mat-datepicker-toggle matSuffix [for]=\"picker_medicion\"></mat-datepicker-toggle>\r\n                        <mat-datepicker #picker_medicion></mat-datepicker>\r\n                    </mat-form-field>\r\n                    <mat-form-field appearance='fill' class=\"w-full sm:w-2/3\">\r\n                        <mat-label>Fecha de Entrega</mat-label>\r\n                        <input matInput [matDatepicker]=\"picker_entrega\" formControlName=\"fecha_entrega\" readonly=\"true\"\r\n                            [min]=\"maxDate\" />\r\n                        <mat-datepicker-toggle matSuffix [for]=\"picker_entrega\"></mat-datepicker-toggle>\r\n                        <mat-datepicker #picker_entrega></mat-datepicker>\r\n                    </mat-form-field>\r\n                </div>\r\n            </form>\r\n\r\n            <!-- Seccin: Adjuntos -->\r\n            <div class=\"mb-3 w-full\">\r\n                <div class=\"flex items-center gap-2\">\r\n                    <button mat-icon-button type=\"button\" matTooltip=\"Aadir Imagen\"\r\n                        [class]=\"color_primario ? '' : default_color\" [style.background-color]=\"color_primario || '' \"\r\n                        (click)=\"fileInput.click();\">\r\n                        <mat-icon class=\"text-white transform -rotate-45\">attach_file</mat-icon>\r\n                    </button>\r\n                    <input #fileInput id=\"fileToUploadImagen\" type=\"file\" [accept]=\"validExtension\"\r\n                        (change)=\"setImagen($event, 0)\" class=\"hidden\">\r\n                    <small *ngIf=\"adjuntos.length === 0\" class=\"text-muted text-lg cursor-pointer\"\r\n                        (click)=\"fileInput.click()\">\r\n                        <b>{{ 'Adjuntos' }}</b> (Max: 20Mb)\r\n                    </small>\r\n                    <!-- Archivos Nuevos / Guardados -->\r\n                    <div *ngIf=\"adjuntos.length > 0\"\r\n                        class=\"mt-4 grid gap-2 p-2 bg-slate-200 rounded-lg max-w-full max-h-56 xl:max-h-56 sm:max-h-18 overflow-y-auto\"\r\n                        style=\"grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\">\r\n                        <ng-container *ngFor=\"let imagen of adjuntos\">\r\n                            <div [class]=\"color_primario ? '' : default_color\"\r\n                                [style.background-color]=\"color_primario || '' \"\r\n                                class=\"flex items-center gap-2 px-4 py-2 rounded-lg text-white\">\r\n\r\n                                <!-- Aqu agrego la clase truncate -->\r\n                                <span *ngIf=\"!imagen.idventaadjunto\" class=\"truncate max-w-xs\">{{ imagen.path }} ({{\r\n                                    getFileSize(imagen.size) }})</span>\r\n                                <a *ngIf=\"imagen.idventaadjunto\" href=\"{{urlBase + imagen.path}}\" target=\"_blank\"\r\n                                    class=\"flex items-center truncate max-w-xs\">\r\n                                    {{ getFileNameFromUrl(imagen.path) }}\r\n                                    <mat-icon class=\"ml-2 text-white\">open_in_new</mat-icon>\r\n                                </a>\r\n\r\n                                <button mat-icon-button (click)=\"removeFile('adjuntos', imagen)\">\r\n                                    <mat-icon class=\"text-white\">close</mat-icon>\r\n                                </button>\r\n                            </div>\r\n                        </ng-container>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            <!-- Carga de articulos -->\r\n            <form [formGroup]=\"form_carga_articulos\">\r\n                <div class=\"flex gap-2 flex-col sm:flex-row\">\r\n                    <div class=\"flex w-full gap-1\">\r\n                        <mat-form-field apparance='fill' class=\"  w-full sm:w-full\">\r\n                            <mat-label>Artculo</mat-label>\r\n                            <input type=\"text\" matInput formControlName=\"articulo\" [matAutocomplete]=\"art_carga\"\r\n                                (ngModelChange)=\"seleccionItem($event)\">\r\n                            <mat-autocomplete autoActiveFirstOption #art_carga=\"matAutocomplete\"\r\n                                [displayWith]=\"getTextArticulo\">\r\n                                <mat-option *ngFor=\"let articulo of filteredArticulos\" [value]=\"articulo\">\r\n                                    {{ articulo.codigo_interno }} - {{ articulo.descripcion }}\r\n                                </mat-option>\r\n                            </mat-autocomplete>\r\n                            <button matSuffix mat-icon-button (click)=\"limpiarCasillero('articulo')\" class=\"mr-2\"\r\n                                *ngIf=\"form_carga_articulos.get('articulo').value\">\r\n                                <mat-icon>clear</mat-icon>\r\n                            </button>\r\n                        </mat-form-field>\r\n                        <!-- Escanner qr -->\r\n                        <!-- <div class=\"flex\">\r\n                            <button [class]=\"color_primario ? '' : default_color\" [style.background]=\"color_primario\"\r\n                                [style.color]=\"color_secundario\"\r\n                                class=\"flex items-center justify-center w-12 h-12 rounded-full ml-1 mt-1\">\r\n                                <svg width=\"22\" height=\"22\" viewBox=\"0 0 16 16\" fill=\"currentColor\"\r\n                                    xmlns=\"http://www.w3.org/2000/svg\">\r\n                                    <path\r\n                                        d=\"M2.66667 2.66667H6.66667V6.66667H2.66667V2.66667ZM13.3333 2.66667V6.66667H9.33333V2.66667H13.3333ZM9.33333 10H10.6667V8.66667H9.33333V7.33333H10.6667V8.66667H12V7.33333H13.3333V8.66667H12V10H13.3333V12H12V13.3333H10.6667V12H8.66667V13.3333H7.33333V10.6667H9.33333V10ZM10.6667 10V12H12V10H10.6667ZM2.66667 13.3333V9.33333H6.66667V13.3333H2.66667ZM4 4V5.33333H5.33333V4H4ZM10.6667 4V5.33333H12V4H10.6667ZM4 10.6667V12H5.33333V10.6667H4ZM2.66667 7.33333H4V8.66667H2.66667V7.33333ZM6 7.33333H8.66667V10H7.33333V8.66667H6V7.33333ZM7.33333 4H8.66667V6.66667H7.33333V4ZM1.33333 1.33333V4H0V1.33333C0 0.979711 0.140476 0.640573 0.390524 0.390524C0.640573 0.140476 0.979711 0 1.33333 0L4 0V1.33333H1.33333ZM14.6667 0C15.0203 0 15.3594 0.140476 15.6095 0.390524C15.8595 0.640573 16 0.979711 16 1.33333V4H14.6667V1.33333H12V0H14.6667ZM1.33333 12V14.6667H4V16H1.33333C0.979711 16 0.640573 15.8595 0.390524 15.6095C0.140476 15.3594 0 15.0203 0 14.6667V12H1.33333ZM14.6667 14.6667V12H16V14.6667C16 15.0203 15.8595 15.3594 15.6095 15.6095C15.3594 15.8595 15.0203 16 14.6667 16H12V14.6667H14.6667Z\"\r\n                                        fill=\"currentColor\" />\r\n                                </svg>\r\n                            </button>\r\n                        </div> -->\r\n                    </div>\r\n                    <mat-form-field apparance='fill' class=\" w-full sm:w-full\">\r\n                        <mat-label>UM</mat-label>\r\n                        <mat-select formControlName=\"unidadmedida\" (ngModelChange)=\"seleccionItem({um: $event})\">\r\n                            <mat-option *ngFor=\"let um of unidades_de_medida\" [value]=\"um.idarticulounidadmedida\">\r\n                                {{um.descripcion_um}} <i *ngIf=\"um.factor_um != 1\" class=\"font-light\">(x{{um.factor_um}}\r\n                                    {{um.um_base}})</i>\r\n                            </mat-option>\r\n                        </mat-select>\r\n                    </mat-form-field>\r\n\r\n                    <mat-form-field apparance='fill' class=\"w-full sm:w-full\">\r\n                        <mat-label>Detalle</mat-label>\r\n                        <input type=\"text\" matInput formControlName=\"detalle\"\r\n                            (keydown.enter)=\"seleccionItem($event, true, 'cantidad')\">\r\n                        <button matSuffix mat-icon-button (click)=\"limpiarCasillero('detalle')\" class=\"mr-2\"\r\n                            *ngIf=\"form_carga_articulos.get('detalle').value\">\r\n                            <mat-icon>clear</mat-icon>\r\n                        </button>\r\n                    </mat-form-field>\r\n\r\n                    <mat-form-field apparance='fill' class=\"w-full sm:w-full\"\r\n                        (keydown.enter)=\"seleccionItem($event, true, 'importe_unitario')\">\r\n                        <mat-label>Cantidad</mat-label>\r\n                        <input matInput type=\"number\" formControlName=\"cantidad\">\r\n                    </mat-form-field>\r\n\r\n                    <div class=\"flex w-full sm:w-1/2 justify-center items-center\">\r\n                        <mat-form-field appearance=\"fill\" class=\"w-full sm:w-full\">\r\n                            <mat-label>Precio Unitario</mat-label>\r\n                            <div class=\"flex items-center\">\r\n                                <input type=\"text\" matInput formControlName=\"importe_unitario\" placeholder=\"$\"\r\n                                    (keydown.enter)=\"seleccionItem($event, true, 'porcentaje_bonificado')\" />\r\n                                <button matSuffix mat-icon-button (click)=\"limpiarCasillero('importe_unitario')\"\r\n                                    class=\"mr-2\" *ngIf=\"form_carga_articulos.get('importe_unitario').value\">\r\n                                    <mat-icon>clear</mat-icon>\r\n                                </button>\r\n                            </div>\r\n                            <!-- Leyenda debajo del input -->\r\n                            <mat-hint class=\"text-xs text-gray-500 italic\">Sin I.V.A.</mat-hint>\r\n                        </mat-form-field>\r\n                        <div class=\"flex\">\r\n                            <button [class]=\"color_primario ? '' : default_color\" [style.background]=\"color_primario\"\r\n                                matTooltip='Calcular Precio Unitario'\r\n                                class=\"flex items-center justify-center w-10 h-10 rounded-full mt-2 ml-2 sm:ml-4 transition-transform transform active:scale-95\"\r\n                                (click)=\"calcularPrecioUnitario()\">\r\n                                <svg width=\"25\" height=\"24\" viewBox=\"0 0 25 24\" fill=\"none\"\r\n                                    xmlns=\"http://www.w3.org/2000/svg\">\r\n                                    <path\r\n                                        d=\"M22.0104 0H2.96439C1.46792 0 0.24353 1.2 0.24353 2.66667V21.3333C0.24353 22.8 1.46792 24 2.96439 24H22.0104C23.5069 24 24.7312 22.8 24.7312 21.3333V2.66667C24.7312 1.2 23.5069 0 22.0104 0ZM13.8886 5.41333L15.3307 4L17.2489 5.88L19.1671 4L20.6091 5.41333L18.6909 7.29333L20.6091 9.17333L19.1671 10.5867L17.2489 8.72L15.3307 10.6L13.8886 9.18667L15.8068 7.30667L13.8886 5.41333ZM4.66492 6.29333H11.4671V8.29333H4.66492V6.29333ZM11.8072 17.3333H9.08632V20H7.04567V17.3333H4.32482V15.3333H7.04567V12.6667H9.08632V15.3333H11.8072V17.3333ZM20.65 19H13.8478V17H20.65V19ZM20.65 15.6667H13.8478V13.6667H20.65V15.6667Z\"\r\n                                        fill=\"white\" />\r\n                                </svg>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"flex w-full sm:w-1/2 justify-center items-center\">\r\n                        <mat-form-field appearance=\"fill\" class=\"w-full sm:w-full\">\r\n                            <mat-label>Bonificacin</mat-label>\r\n                            <div class=\"flex items-center\">\r\n                                <input type=\"text\" matInput formControlName=\"porcentaje_bonificado\" placeholder=\"%\"\r\n                                    (keydown.enter)=\"onCargar($event)\" />\r\n                                <button matSuffix mat-icon-button (click)=\"limpiarCasillero('porcentaje_bonificado')\"\r\n                                    class=\"mr-2\" *ngIf=\"form_carga_articulos.get('porcentaje_bonificado').value\">\r\n                                    <mat-icon>clear</mat-icon>\r\n                                </button>\r\n                            </div>\r\n                        </mat-form-field>\r\n\r\n                        <div class=\"flex\">\r\n                            <button [class]=\"color_primario ? '' : default_color\" [style.background]=\"color_primario\"\r\n                                matTooltip='Agregar'\r\n                                class=\"flex items-center justify-center w-10 h-10 rounded-full mt-2 ml-2 sm:ml-4 transition-transform transform active:scale-95\"\r\n                                (click)=\"onCargar()\">\r\n                                <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\"\r\n                                    xmlns=\"http://www.w3.org/2000/svg\">\r\n                                    <path d=\"M16 10H10V16H6V10H0V6H6V0H10V6H16V10Z\" fill=\"white\" />\r\n                                </svg>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </form>\r\n\r\n            <!-- Barra de busqueda de articulos en la grilla -->\r\n            <div class=\"search-container mt-2 mb-2 flex\">\r\n                <div class=\"relative w-full md:w-1/3\">\r\n                    <input matInput (keyup)=\"applyFilter($event.target.value)\" placeholder=\"Buscar artculo\"\r\n                        class=\"w-full bg-slate-50 border border-gray-200 rounded-lg shadow-md py-2 px-4 text-sm placeholder-gray-500 text-gray-700 transition duration-300\" />\r\n                    <span class=\"absolute inset-y-0 right-4 flex items-center text-gray-400\">\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                            <path fill-rule=\"evenodd\"\r\n                                d=\"M12.9 14.32a8 8 0 111.42-1.42l4.39 4.4a1 1 0 11-1.42 1.41l-4.4-4.39zM8 14a6 6 0 100-12 6 6 0 000 12z\"\r\n                                clip-rule=\"evenodd\" />\r\n                        </svg>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- Grilla -->\r\n            <div class=\"overflow-y-auto max-h-[300px] h-[300px] shadow-md rounded-lg bg-white\">\r\n                <table *ngIf=\"dataSource.data.length != 0\" mat-table [dataSource]=\"dataSource\"\r\n                    class=' w-full mt-1 min-h-full'>\r\n                    <ng-container matColumnDef='articulo'>\r\n                        <th mat-header-cell *matHeaderCellDef [class]=\"color_primario ? '' : default_color\"\r\n                            [style.background]=\"color_primario || '' \" class=\"rounded-tl-lg text-white w-auto\">\r\n                            Articulo</th>\r\n                        <td mat-cell *matCellDef='let item' class=\"w-auto\">\r\n                            {{item.descripcion }}\r\n                        </td>\r\n                        <td mat-footer-cell *matFooterCellDef class=\"bg-slate-200\"></td>\r\n                    </ng-container>\r\n                    <ng-container matColumnDef='unidadmedida'>\r\n                        <th mat-header-cell *matHeaderCellDef [class]=\"color_primario ? '' : default_color\"\r\n                            [style.background]=\"color_primario || '' \" class=\"text-white w-auto\">Unidad de medida</th>\r\n                        <td mat-cell *matCellDef='let item' class=\"text-center\">\r\n                            {{ item.descripcion_um }}\r\n                        </td>\r\n                        <td mat-footer-cell *matFooterCellDef class=\"bg-slate-200\"></td>\r\n                    </ng-container>\r\n                    <ng-container matColumnDef='cantidad'>\r\n                        <th mat-header-cell *matHeaderCellDef [class]=\"color_primario ? '' : default_color\"\r\n                            [style.background]=\"color_primario || '' \" class=\"text-white w-auto\">Cantidad</th>\r\n                        <td mat-cell *matCellDef='let item'>\r\n                            {{ item.cantidad }}\r\n                        </td>\r\n                        <td mat-footer-cell *matFooterCellDef class=\"bg-slate-200\"></td>\r\n                    </ng-container>\r\n                    <ng-container matColumnDef='importe_unitario' class=\"content-end\">\r\n                        <th mat-header-cell *matHeaderCellDef [class]=\"color_primario ? '' : default_color\"\r\n                            [style.background]=\"color_primario || '' \" class=\"text-white w-auto\">Precio Unitario</th>\r\n                        <td mat-cell *matCellDef='let item'>\r\n                            <b> ${{ item.importe_unitario }} </b>\r\n                        </td>\r\n                        <td mat-footer-cell *matFooterCellDef class=\"text-lg font-bold bg-slate-200\">TOTAL</td>\r\n                    </ng-container>\r\n                    <ng-container matColumnDef='importe_bonificado'>\r\n                        <th mat-header-cell *matHeaderCellDef [class]=\"color_primario ? '' : default_color\"\r\n                            [style.background]=\"color_primario || '' \" class=\"text-white w-auto\">Bonificado</th>\r\n                        <td mat-cell *matCellDef='let item'>\r\n                            <b>${{ item.importe_bonificado }} </b> ({{item.porcentaje_bonificado}}%)\r\n                        </td>\r\n                        <td mat-footer-cell *matFooterCellDef class=\"bg-slate-200\"> ${{totales.importe_bonificado}}</td>\r\n                    </ng-container>\r\n                    <ng-container matColumnDef='importe_no_bonificado'>\r\n                        <th mat-header-cell *matHeaderCellDef [class]=\"color_primario ? '' : default_color\"\r\n                            [style.background]=\"color_primario || '' \" class=\"text-white w-auto\">No Bonificado</th>\r\n                        <td mat-cell *matCellDef='let item'>\r\n                            <b> ${{ item.importe_no_bonificado }} </b> ({{100 - item.porcentaje_bonificado}}%)\r\n                        </td>\r\n                        <td mat-footer-cell *matFooterCellDef class=\"bg-slate-200\"> ${{totales.importe_no_bonificado}}\r\n                        </td>\r\n                    </ng-container>\r\n                    <ng-container matColumnDef='importe_iva'>\r\n                        <th mat-header-cell *matHeaderCellDef [class]=\"color_primario ? '' : default_color\"\r\n                            [style.background]=\"color_primario || '' \" class=\"text-white w-auto\">IVA</th>\r\n                        <td mat-cell *matCellDef='let item'>\r\n                            <b> ${{ item.importe_iva }} </b>\r\n                        </td>\r\n                        <td mat-footer-cell *matFooterCellDef class=\"bg-slate-200\"> ${{totales.importe_iva}}</td>\r\n                    </ng-container>\r\n                    <ng-container matColumnDef='importe_subtotal'>\r\n                        <th mat-header-cell *matHeaderCellDef [class]=\"color_primario ? '' : default_color\"\r\n                            [style.background]=\"color_primario || '' \" class=\"text-white w-auto\">Subtotal</th>\r\n                        <td mat-cell *matCellDef='let item'>\r\n                            <b> ${{ item.importe_subtotal }} </b>\r\n                        </td>\r\n                        <td mat-footer-cell *matFooterCellDef class=\"bg-slate-200\"> ${{totales.importe_subtotal}}</td>\r\n                    </ng-container>\r\n                    <ng-container matColumnDef='acciones'>\r\n                        <th mat-header-cell *matHeaderCellDef [class]=\"color_primario ? '' : default_color\"\r\n                            [style.background]=\"color_primario || '' \" class=\"rounded-tr-lg text-white w-auto\">\r\n                        </th>\r\n                        <td mat-cell *matCellDef='let movimiento'>\r\n                            <button mat-icon-button (click)=\"deleteMovimiento(movimiento)\" #delete>\r\n                                <mat-icon color=\"warn\">delete</mat-icon>\r\n                            </button>\r\n                        </td>\r\n                        <td mat-footer-cell *matFooterCellDef class=\"bg-slate-200\"></td>\r\n                    </ng-container>\r\n                    <tr mat-header-row *matHeaderRowDef='columns; sticky: true'></tr>\r\n                    <tr mat-row *matRowDef='let row; columns: columns;'></tr>\r\n                    <tr mat-footer-row *matFooterRowDef=\"columns; sticky: true\"></tr>\r\n                </table>\r\n                <div *ngIf=\"dataSource.data.length === 0\"\r\n                    class=\"flex justify-center items-center h-full mt-0 bg-white \">\r\n                    <p class=\"text-gray-600 text-lg\">No hay artculos cargados.</p>\r\n                </div>\r\n            </div>\r\n\r\n            <form [formGroup]=\"form\">\r\n                <div class=\"flex w-full gap-1 justify-end mt-2\">\r\n                    <mat-form-field apparance='fill' class=\"w-1/3 md:w-1/4\"\r\n                        (keydown.enter)=\"seleccionItem($event, true)\">\r\n                        <mat-label>Descuento Efectivo</mat-label>\r\n                        <input matInput type=\"number\" formControlName=\"porcentaje_descuento_efectivo\" placeholder=\"%\"\r\n                            (blur)=\"onBlurInput($event)\">\r\n                    </mat-form-field>\r\n\r\n                    <mat-form-field apparance='fill' class=\"w-1/3 md:w-1/4\"\r\n                        (keydown.enter)=\"seleccionItem($event, true)\">\r\n                        <mat-label>TOTAL VENTA</mat-label>\r\n                        <input matInput type=\"number\" formControlName=\"total_venta\" readonly=\"true\">\r\n                    </mat-form-field>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </form>\r\n\r\n    <div class=\"w-full md:flex justify-end md:pb-6 md:px-6 mt-auto\">\r\n        <button mat-raised-button [class]=\"color_primario ? '' : default_color\"\r\n            [style.background-color]=\"color_primario || '' \"\r\n            class='w-full rounded-none md:w-36 md:rounded-lg py-8 md:py-0' (click)='onSubmit()'>\r\n            <span class=\"text-white font-medium text-base\">Guardar</span>\r\n        </button>\r\n    </div>\r\n</div>","import { Component, EventEmitter, Inject, OnInit, Output } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { AppAlertService } from 'app/shared/service/app/alert.service';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport { IAlertConfig } from '@shared/models/alert';\r\nimport { finalize, Subject, takeUntil, takeWhile, tap, timer } from 'rxjs';\r\nimport { EmpresaService } from '@shared/service/app/empresa.service';\r\nimport { VentaGenericasService } from '../../service/venta-generica.service';\r\nimport { dtoCalcularUnitario } from '../../models/venta-generica';\r\nimport { IResponse } from '@shared/models/response-with-token';\r\n@Component({\r\n    selector: 'app-calcular-unitario',\r\n    templateUrl: './calcular-unitario.component.html',\r\n    styleUrls: ['./calcular-unitario.component.scss']\r\n})\r\nexport class CalcularUnitarioComponent implements OnInit {\r\n    columns = ['nombre', 'activo', 'acciones'];\r\n    form: FormGroup;\r\n    title: string;\r\n    showAlert = false;\r\n    _alertConfig: IAlertConfig;\r\n    color_primario: string;\r\n    color_secundario: string;\r\n    default_color: string = 'bg-primary';\r\n    private _unsubscribeAll: Subject<any> = new Subject<any>();\r\n    @Output() public creadoExitosamente: EventEmitter<void> = new EventEmitter<void>();\r\n    @Output() public editadoExitosamente: EventEmitter<void> = new EventEmitter<void>();\r\n    deposito_default = 0;\r\n\r\n    constructor(\r\n        @Inject(MAT_DIALOG_DATA) public data: any,\r\n        private _ventaGenericasService: VentaGenericasService,\r\n        private _empresaService: EmpresaService,\r\n        private alert: AppAlertService,\r\n        public dialogRef: MatDialogRef<CalcularUnitarioComponent>\r\n    ) {\r\n        this.title = `Calcular Precio Unitario ${this.data.descripcion}`;\r\n\r\n        // Subscribe to empresa data\r\n        this._empresaService.empresa$\r\n            .pipe(takeUntil(this._unsubscribeAll))\r\n            .subscribe(empresa => {\r\n                this.color_primario = empresa.color_primario;\r\n                this.color_secundario = empresa.color_secundario;\r\n                this.deposito_default = empresa.deposito_default;\r\n            });\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        // Load empresa data\r\n        this._empresaService.getEmpresa();\r\n        this.newForm();\r\n        this.subscribeAlert();\r\n    }\r\n\r\n    // Alert\r\n    subscribeAlert() {\r\n        this.alert.emitConfig.subscribe({\r\n            next: (config: IAlertConfig) => {\r\n                this.showAlert = true;\r\n                this._alertConfig = {\r\n                    ...config,\r\n                    appearance: 'border',\r\n                };\r\n                let time = 2;\r\n                timer(100, 1500)\r\n                    .pipe(\r\n                        finalize(() => {\r\n                            this.showAlert = false;\r\n                            this._alertConfig = null;\r\n                        }),\r\n                        takeWhile(() => time > 0),\r\n                        takeUntil(this._unsubscribeAll),\r\n                        tap(() => (time -= 1))\r\n                    )\r\n                    .subscribe();\r\n            },\r\n        });\r\n    }\r\n\r\n    newForm() {\r\n        this.form = new FormGroup({\r\n            articulo: new FormControl({ value: `${this.data.codigo_interno} | ${this.data.descripcion}`, disabled: true }, Validators.required),\r\n            bruto: new FormControl((''), Validators.required),\r\n        });\r\n    }\r\n\r\n    onSubmit() {\r\n        if (!this.form.valid) {\r\n            return this.alert.error('Revise Los Datos Ingresados');\r\n        } else {\r\n            const payload: dtoCalcularUnitario = {\r\n                idarticulo: this.data.idarticulo,\r\n                bruto: this.form.get('bruto').value\r\n            }\r\n\r\n            this._ventaGenericasService.calcularPrecioUnitario(payload)\r\n                .subscribe({\r\n                    next: (data: IResponse<any>) => {\r\n                        if (data) {\r\n                            this.creadoExitosamente.emit();\r\n                            this.onCloseMenu(data);\r\n                        }\r\n                    }\r\n                })\r\n        }\r\n    }\r\n\r\n    onCloseMenu(data) {\r\n        this.dialogRef.close(data)\r\n    }\r\n}","<div\r\n    class=\"fixed inset-0 sm:static max-h-screen sm:inset-auto flex flex-col md:min-w-140 sm:min-w-90 sm:w-90 sm:rounded-2xl overflow-y-auto overflow-hidden bg-white shadow-sm dark:bg-slate-900\">\r\n    <div [class]=\"color_primario ? '' : default_color\" [style.background-color]=\"color_primario || '' \"\r\n        class=\"w-full px-4 py-4 flex justify-between items-center\">\r\n        <span class=\"text-white font-bold text-lg\">{{title}}</span>\r\n        <div>\r\n            <button mat-icon-button (click)=\"onCloseMenu(false)\">\r\n                <mat-icon class=\"text-white\">close</mat-icon>\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <!-- Alert -->\r\n    <fuse-alert class=\"fixed top-0 left-0 w-full flex justify-center items-center mt-8 alert-main z-99999\"\r\n        [type]=\"_alertConfig.type\" [appearance]=\"'outline'\" *ngIf=\"showAlert\" [@fadeIn]=\"showAlert\">\r\n        {{ _alertConfig.message }}\r\n    </fuse-alert>\r\n    <form class=\"flex flex-col w-full h-full p-4 form-menu\" [formGroup]=\"form\">\r\n        <mat-form-field appearance='outline' class=\"w-full\">\r\n            <mat-label>Artculo</mat-label>\r\n            <input matInput formControlName='articulo' [value]=\"data.descripcion\">\r\n        </mat-form-field>\r\n        <mat-form-field appearance='outline' class=\" w-full\">\r\n            <mat-label>Bruto</mat-label>\r\n            <input matInput formControlName='bruto' (keydown.enter)=\"onSubmit()\">\r\n        </mat-form-field>\r\n    </form>\r\n    <div class=\"w-full md:flex md:justify-center md:pb-6 md:px-6 mt-auto\">\r\n        <button mat-raised-button [class]=\"color_primario ? '' : default_color\"\r\n            [style.background-color]=\"color_primario || '' \"\r\n            class='w-full rounded-none md:w-36 md:rounded-lg py-8 md:py-0' (click)='onSubmit()'>\r\n            <span class=\"text-white font-medium text-base\">Calcular</span>\r\n        </button>\r\n    </div>\r\n</div>","import { Component, EventEmitter, Input, OnDestroy, OnInit, Output, ViewChild } from '@angular/core';\r\nimport { Subject, Subscription, debounceTime, distinctUntilChanged, firstValueFrom, takeUntil } from 'rxjs';\r\nimport { MatTableDataSource } from '@angular/material/table'\r\nimport { FuseConfirmationService } from '@fuse/services/confirmation';\r\nimport { AppAlertService } from '@shared/service/app/alert.service';\r\nimport { FormControl } from '@angular/forms';\r\nimport { TablaDinamicaComponent } from '@shared/components/tabla-dinamica/tabla-dinamica.component';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { environment } from 'environments/environment';\r\nimport { SearchService } from 'app/layout/common/search/search.service';\r\nimport { MatButton } from '@angular/material/button';\r\nimport { JedsMenuService } from '@shared/service/app/jeds-menu.service';\r\nimport { IFilter } from '@shared/models/filter';\r\nimport { HeaderTextService } from '@shared/components/header-text/header-text.service';\r\nimport { Router } from '@angular/router';\r\nimport { EmpresaService } from '@shared/service/app/empresa.service';\r\nimport { PwaService } from '@shared/service/app/pwa.service';\r\nimport { LectorQrComponent } from '@shared/components/lector-qr/lector-qr.component';\r\nimport { VentaGenericasService } from '../service/venta-generica.service';\r\nimport { IVentaGenerica } from '../models/venta-generica';\r\n\r\n@Component({\r\n    selector: 'app-venta-generica',\r\n    templateUrl: './venta-genericas.component.html',\r\n    styleUrls: ['./venta-genericas.component.scss']\r\n})\r\nexport class VentaGenericasComponent implements OnInit, OnDestroy {\r\n    // Necesarios para la app\r\n    search: FormControl = new FormControl('');\r\n    sortValue: string;\r\n    color_primario: string;\r\n    color_secundario: string;\r\n    default_color: string = 'border-primary text-primary';\r\n    private _unsubscribeAll: Subject<any> = new Subject<any>();\r\n\r\n    // Particulares del modulo\r\n    headers = ['', 'Numero', 'Fecha', 'Cliente', 'Vendedor', 'Total', 'Acciones'];\r\n    column_params = ['seleccion', 'idventa', 'fecha', 'cliente', 'usuario', 'importe_total', 'acciones'];\r\n    FilterEventSub$: Subscription;\r\n    SearchTextSub$: Subscription;\r\n    ventas: IVentaGenerica[];\r\n    selectedItems: any[] = [];\r\n    public dataSource: MatTableDataSource<IVentaGenerica> = new MatTableDataSource();\r\n    funcionesObjeto = null;\r\n    filtroBusqueda: string = '';\r\n    filtersLike = ['cliente', 'vendedor'];\r\n    filter: IFilter = {\r\n        deposito: -1,\r\n        filtroFechaInicio: '',\r\n        filtroFechaFin: ''\r\n    };\r\n    @Input() extraParams = '';\r\n    @Output() parametrosActualizados = new EventEmitter<any>();\r\n    env = environment.ventas.view_vta_ventas + '?';\r\n\r\n    constructor(\r\n        private _ventaGenericasService: VentaGenericasService,\r\n        private _empresaService: EmpresaService,\r\n        private confirm: FuseConfirmationService,\r\n        private alert: AppAlertService,\r\n        private dialogo: MatDialog,\r\n        private _searchService: SearchService,\r\n        private router: Router,\r\n        public _headerTextService: HeaderTextService,\r\n        private pwaService: PwaService\r\n\r\n    ) {\r\n        this._headerTextService.setTitulo(this.router);\r\n\r\n        /**\r\n         * Aca se declaran los botones que iran en la grilla sobre el apartado de acciones.\r\n         */\r\n        this.funcionesObjeto = [\r\n            {\r\n                nombre_boton: \"editar\",\r\n                functionName: 'editar',\r\n                iconoAccion: (venta_generica: IVentaGenerica) => 'jedstion:editar',\r\n                iconoAccionado: (venta_generica: IVentaGenerica) => '',\r\n                iconoDeshabilitado: (venta_generica: IVentaGenerica) => '',\r\n            },\r\n            {\r\n                nombre_boton: \"eliminar\",\r\n                functionName: 'eliminar',\r\n                iconoAccion: (venta_generica: IVentaGenerica) => 'jedstion:eliminar',\r\n                iconoAccionado: (venta_generica: IVentaGenerica) => '',\r\n                iconoDeshabilitado: (venta_generica: IVentaGenerica) => '',\r\n            },\r\n            {\r\n                nombre_boton: \"Reporte\",\r\n                functionName: 'orden_servicio',\r\n                iconoAccion: (venta_generica: IVentaGenerica) => 'jedstion:imprimir',\r\n                iconoAccionado: (venta_generica: IVentaGenerica) => '',\r\n                iconoDeshabilitado: (venta_generica: IVentaGenerica) => '',\r\n            }\r\n        ];\r\n\r\n        // Subscribe to empresa data\r\n        this._empresaService.empresa$\r\n            .pipe(takeUntil(this._unsubscribeAll))\r\n            .subscribe(empresa => {\r\n                this.color_primario = empresa.color_primario;\r\n                this.color_secundario = empresa.color_secundario;\r\n            });\r\n    }\r\n\r\n    @ViewChild(TablaDinamicaComponent) tabla: TablaDinamicaComponent;\r\n    ngOnInit(): void {\r\n\r\n        // Load empresa data\r\n        this._empresaService.getEmpresa();\r\n        this.SearchTextSub$ = this._searchService.getSearchText().pipe( //Se obtienen los valores que coinciden con lo ingresado en la barra de busqueda\r\n            debounceTime(750),\r\n            distinctUntilChanged()\r\n        )\r\n            .subscribe(value => {\r\n                this.filtroBusqueda = value;\r\n                this.tabla.filters(this.filtroBusqueda);\r\n            });\r\n\r\n        this.FilterEventSub$ = this._searchService.getFilterEvent().subscribe(event => {\r\n            this.onFilterMenu(this._searchService.getFilterOrigin())\r\n        });\r\n    }\r\n\r\n    saveVenta() {\r\n        this.router.navigate(['/ventas/alta']);\r\n    }\r\n    \r\n    updateVenta(event) {\r\n        const id = event.params.data.idventa;\r\n        this.router.navigate(['/ventas/edicion/', id]);\r\n    }\r\n\r\n    /**\r\n    * Esta funcion elimina un item\r\n    * @param event \r\n    */\r\n    deleteVenta(event) {\r\n        this.confirm.open({\r\n            title: \"Eliminar Venta: \" + event.params.data.idventa,\r\n            message: `Desea eliminar la Venta: ${event.params.data.idventa} -  ${event.params.data.cliente}?`,\r\n            dismissible: false,\r\n            actions: {\r\n                confirm: {\r\n                    show: true,\r\n                    color: 'warn',\r\n                    label: 'Si',\r\n                },\r\n                cancel: {\r\n                    show: true,\r\n                    label: 'No',\r\n                },\r\n            },\r\n        })\r\n            .afterClosed()\r\n            .subscribe(res => {\r\n                if (res === 'confirmed') {\r\n                    this._ventaGenericasService.deleteVenta(event.params.data.idventa).subscribe({\r\n                        next: (res) => {\r\n                            // Manejar la respuesta exitosa\r\n                            this.alert.success(\"Venta eliminada con xito.\");\r\n                            if (res) {\r\n                                this.tabla.renderTabla()\r\n                            }\r\n                        },\r\n                        error: (error) => {\r\n                            // Manejar el error\r\n                            console.error('Error en el servicio:', error);\r\n                            this.alert.warning(\"Esta Venta no puede eliminarse. Tiene elementos asociados.\");\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n    }\r\n\r\n    onFilterMenu(origin: MatButton) {\r\n        // this._menuService\r\n        //     .open(FilterMenuComponent, origin._elementRef, {\r\n        //         filter: this.filter,\r\n        //         data: this.tabla.getElementosExistentes()\r\n        //     })\r\n        //     .afterClosed()\r\n        //     .subscribe({\r\n        //         next: filter => {\r\n        //             if (filter) {\r\n        //                 this.filter = filter;\r\n        //                 this.extraParams = this.filter.deposito != -1 ? \"filter[iddeposito]=\" + this.filter.deposito + '&' : '';\r\n        //                 this.extraParams += this.filter.venta_responsable != -1 ? \"filter[idventagenerica]=\" + this.filter.venta_responsable + '&' : '';\r\n        //                 this.extraParams += this.filter.venta_encargado != -1 ? \"filter[venta_entrega]=\" + this.filter.venta_encargado + '&' : '';\r\n        //                 this.extraParams += this.filter.filtroFechaInicio != null ? \"filter[fecha][gte]=\" + this.filter.filtroFechaInicio + '&' : '';\r\n        //                 this.extraParams += this.filter.filtroFechaFin != null ? \"filter[fecha][lte]=\" + this.filter.filtroFechaFin + '&' : '';\r\n        //                 this.tabla.filters(this.filtroBusqueda);\r\n        //                 // this._searchService.getSearchInput().setValue(this._tabsServices.getFiltroBuscadorPedido());\r\n        //             }\r\n        //         },\r\n        //     });\r\n    }\r\n\r\n    /**\r\n    * Esta es la funcion que se encarga de la columna acciones dentro de la grilla dinamica\r\n    * @param event \r\n    */\r\n    generarAcciones(event: { name: string, params: any }) {\r\n        switch (event.name) {\r\n            case 'editar':\r\n                this.updateVenta(event);\r\n                break;\r\n            case 'eliminar':\r\n                this.deleteVenta(event);\r\n                break;\r\n            case 'orden_servicio':\r\n                this.reporteOrdenServicio(event);\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n    * Esta funcin es la que se encarga de la seleccion de check box de Ventas seleccionados\r\n    * @param selectedElements - La lista de Ordenes de servicio seleccionados.\r\n    */\r\n    onSelectionChange(selectedElements: any[]) {\r\n        this.selectedItems = selectedElements;\r\n    }\r\n\r\n    /**\r\n     * Esta funcion Genera un Reporte y lo muestra en una nueva pestaa\r\n     */\r\n    reporteOrdenServicio(event?) {\r\n        let idordenservicio = '';\r\n        let payload = null;\r\n\r\n        // Si es atraves de presionar el boton de un item\r\n        if (event) {\r\n            // Encapsulamos el nombre de la clave del objeto\r\n            idordenservicio = Object.keys(event.params.data)[0];\r\n            // Selecciono el item\r\n            this.selectedItems.push(event.params.data);\r\n        }\r\n\r\n        // Si no es atraves de presionar el boton del item Y no hay elementos en el array o la longitud del array es igual a cero\r\n        if (!event && (!this.selectedItems || this.selectedItems.length === 0)) {\r\n            return this.alert.error('Debe seleccionar al menos un Item.');\r\n        } else {\r\n            // Encapsulamos el nombre de la clave del objeto\r\n            idordenservicio = Object.keys(this.selectedItems[0])[0];\r\n\r\n            // Armo el payload para llamar al servicio\r\n            payload = {\r\n                // Creo un objeto con el valor del nombre de la clave y con el valor item con esa clave\r\n                ordenes_de_servicio: this.selectedItems.map(element => ({ [idordenservicio]: element[`${idordenservicio}`] }))\r\n            };\r\n\r\n            this._ventaGenericasService.reporteOrdenServicio(payload).subscribe({\r\n                next: (data) => {\r\n                    if (data.success === true) {\r\n                        const reportePath = data.path;\r\n\r\n                        if (this.pwaService.isPwa()) {\r\n                            this.router.navigate(['/reporte', reportePath]);\r\n                        } else {\r\n                            const reporteUrl = `${environment.baseRest}/${reportePath}`;\r\n                            // Abre la pestaa aqu antes de la promesa\r\n                            const newWindow = window.open('', '_blank');\r\n                            if (newWindow) {\r\n                                newWindow.location.href = reporteUrl; // Redirige la URL cuando tengas el reporte\r\n                            } else {\r\n                                console.error('No se pudo abrir la nueva pestaa.');\r\n                            }\r\n                        }\r\n\r\n                        // Limpio la seleccion para que no se acumulen...\r\n                        this.selectedItems = [];\r\n                    } else {\r\n                        console.error('Error al generar el reporte');\r\n                    }\r\n                },\r\n                error: (error) => {\r\n                    console.error('Error en la solicitud del reporte', error);\r\n                }\r\n            });\r\n\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this._searchService.unsubscribe();\r\n        this.dialogo.closeAll();\r\n    }\r\n}","<div class=\"w-full flex flex-col relative \">\r\n    <div class=\"mb-12 mt-6\">\r\n        <!-- Contenedor del botn -->\r\n        <div class=\"absolute right-10 flex space-x-4\">\r\n            <button mat-flat-button (click)=\"saveVenta()\" #save [class]=\"color_primario ? '' : default_color\"\r\n                [style.border]=\"color_primario || ''\" [style.color]=\"color_primario || ''\"\r\n                class=\"w-full px-6 py-6 !border border-solid rounded-lg md:w-55 md:rounded-lg\">\r\n                <div class=\"flex items-center\">\r\n                    <!-- SVG con fill=\"currentColor\" -->\r\n                    <svg id=\"note_plus\" width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"currentColor\"\r\n                        xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <path\r\n                            d=\"M15.8333 10.8333C16.4167 10.8333 16.975 10.9417 17.5 11.125V7.5L12.5 2.5H4.16667C3.24167 2.5 2.5 3.24167 2.5 4.16667V15.8333C2.5 16.7583 3.25 17.5 4.16667 17.5H11.125C10.9417 16.975 10.8333 16.4167 10.8333 15.8333C10.8333 13.075 13.075 10.8333 15.8333 10.8333ZM11.6667 3.75L16.25 8.33333H11.6667V3.75ZM19.1667 15V16.6667H16.6667V19.1667H15V16.6667H12.5V15H15V12.5H16.6667V15H19.1667Z\" />\r\n                    </svg>\r\n                    <span class=\"ml-2 text-lg mt-0.5 hidden md:inline\">Nueva Venta</span>\r\n                </div>\r\n            </button>\r\n            <button mat-flat-button [class]=\"color_primario ? '' : default_color\" [style.border]=\"color_primario || ''\"\r\n                [style.color]=\"color_primario || ''\"\r\n                class=\"w-full px-6 py-6 !border border-solid rounded-lg md:w-55 md:rounded-lg\"\r\n                (click)=\"reporteOrdenServicio()\">\r\n                <div class=\"flex items-center\">\r\n                    <svg width=\"22\" height=\"22\" viewBox=\"0 0 26 26\" fill=\"currentColor\"\r\n                        xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <g clip-path=\"url(#clip0_535_423)\">\r\n                            <path\r\n                                d=\"M20.5568 8.68182H19.4773V3.28409H6.52274V8.68182H5.4432C3.65115 8.68182 2.20456 10.1284 2.20456 11.9205V18.3977H6.52274V22.7159H19.4773V18.3977H23.7955V11.9205C23.7955 10.1284 22.3489 8.68182 20.5568 8.68182ZM8.68183 5.44318H17.3182V8.68182H8.68183V5.44318ZM17.3182 18.3977V20.5568H8.68183V16.2386H17.3182V18.3977ZM19.4773 16.2386V14.0795H6.52274V16.2386H4.36365V11.9205C4.36365 11.3267 4.84945 10.8409 5.4432 10.8409H20.5568C21.1506 10.8409 21.6364 11.3267 21.6364 11.9205V16.2386H19.4773Z\" />\r\n                            <path\r\n                                d=\"M19.4773 13.5398C20.0735 13.5398 20.5568 13.0564 20.5568 12.4602C20.5568 11.864 20.0735 11.3807 19.4773 11.3807C18.8811 11.3807 18.3977 11.864 18.3977 12.4602C18.3977 13.0564 18.8811 13.5398 19.4773 13.5398Z\" />\r\n                        </g>\r\n                        <defs>\r\n                            <clipPath id=\"clip0_535_423\">\r\n                                <rect width=\"25.9091\" height=\"25.9091\" fill=\"currentColor\"\r\n                                    transform=\"translate(0.0454712 0.0454559)\" />\r\n                            </clipPath>\r\n                        </defs>\r\n                    </svg>\r\n                    <span class=\"ml-2 text-lg mt-0.5 hidden md:inline\">Imprimir</span>\r\n                </div>\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <div class=\"pr-2 pl-2\">\r\n        <!-- Tabla dinmica -->\r\n        <app-tabla-dinamica class=\"bottom-10 sm:bottom-0 table-fixed sm:top-2 w-full m-0\"\r\n            (selectionChange)=\"onSelectionChange($event)\" [cache]=\"false\" [columnsNames]=\"headers\"\r\n            [renderType]=\"'client'\" [columnsParams]=\"column_params\" [endpoint]=\"env\" [functions]=\"funcionesObjeto\"\r\n            [extraClasses]=\"'td.mat-cell border,td.mat-cell border-slate-400'\"\r\n            (functionEmitter)=\"generarAcciones($event)\" [FiltersLikes]=\"filtersLike\" [extraParams]=\"extraParams\">\r\n        </app-tabla-dinamica>\r\n    </div>\r\n</div>","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { AuthService } from '@core/auth/auth.service';\r\nimport { dtoCalcularItem, dtoCalcularUnitario, dtoCrearVenta, dtoEditarVenta, IVenta, IVentaGenericaResponse } from '../models/venta-generica';\r\nimport { environment } from 'environments/environment';\r\nimport { map, Subject } from 'rxjs';\r\nimport { IResponse } from '@shared/models/response-with-token';\r\n\r\n@Injectable()\r\nexport class VentaGenericasService {\r\n    constructor(private http: HttpClient, private _authService: AuthService) { }\r\n\r\n    /**\r\n     * \r\n     * @param ordenes_de_servicio\r\n     * @returns \r\n     */\r\n    reporteOrdenServicio(ordenes_de_servicio: []) {\r\n        return this.http.post<IVentaGenericaResponse>(`${environment.reporte_orden_servicio}`, ordenes_de_servicio);\r\n    }\r\n\r\n    saveVenta(payload: dtoCrearVenta) {\r\n        return this.http.post<IResponse<IVenta>>(`${environment.ventas.vta_ventas}`, payload);\r\n    }\r\n\r\n    updateVenta(idventa: number, payload: dtoEditarVenta) {\r\n        return this.http.put<IVentaGenericaResponse>(`${environment.ventas.vta_ventas}` + '/' + idventa, payload);\r\n    }\r\n\r\n    deleteVenta(idventa) {\r\n        return this.http.delete<IVentaGenericaResponse>(`${environment.ventas.vta_ventas}` + '/' + idventa);\r\n    }\r\n\r\n    getDatosVenta(idventa: number) {\r\n        let subject = new Subject<any>();\r\n        this.http.get<Response[]>(`${environment.ventas.vta_venta_get_datos}` + '?idventa=' + idventa)\r\n            .subscribe((resp: any) => {\r\n                this._authService.accessToken = resp.token;\r\n                subject.next({\r\n                    list: resp.result\r\n                })\r\n            });\r\n        return subject.asObservable();\r\n    }\r\n\r\n    getClientes(option?) {\r\n        let subject = new Subject<any>();\r\n        this.http.get<Response[]>(`${environment.administracion.select_clientes}`)\r\n            .subscribe((resp: any) => {\r\n                this._authService.accessToken = resp.token;\r\n                subject.next({\r\n                    list: resp.result\r\n                })\r\n            });\r\n        return subject.asObservable();\r\n    }\r\n\r\n    getVendedores(option?) {\r\n        let f = '?sort=RazonSocial&filter[vendedor]=1';\r\n        let subject = new Subject<any>();\r\n        this.http.get<Response[]>(`${environment.login.view_usuarios}${f}`)\r\n            .subscribe((resp: any) => {\r\n                this._authService.accessToken = resp.token;\r\n                subject.next({\r\n                    list: resp.result\r\n                })\r\n            });\r\n        return subject.asObservable();\r\n    }\r\n\r\n    getArticulos(idarticulo?: number, filterLike?: string) {\r\n        let f = `?filter[activo]=1&pagination=1&per-page=10&page=1`;\r\n        if (idarticulo) {\r\n            f += `&filter[idarticulo]=${idarticulo}`;\r\n        } else if (filterLike) {\r\n            f += `&filter[or][0][codigo_interno][like]=${filterLike}&filter[or][1][descripcion][like]=${filterLike}`;\r\n        }\r\n\r\n        let subject = new Subject<any>();\r\n        this.http.get<any>(`${environment.stock.articulos}${f}`).pipe(\r\n            map((resp => resp))\r\n        ).subscribe((resp: any) => {\r\n            this._authService.accessToken = resp.token,\r\n                subject.next({\r\n                    list: resp.result\r\n                })\r\n        });\r\n        return subject.asObservable()\r\n    }\r\n\r\n    getUnidadesDeMedidaArticulos(idarticulo) {\r\n        let f = `?filter[idarticulo]=${idarticulo}`\r\n        f += `&expand=um`\r\n        let subject = new Subject<any>();\r\n        this.http.get<Response[]>(`${environment.stock.articulo_unidad_medidas}${f}`)\r\n            .subscribe((resp: any) => {\r\n                // this._authService.accessToken = resp.token;\r\n                subject.next({\r\n                    list: resp.result\r\n                })\r\n            });\r\n        return subject.asObservable()\r\n    }\r\n\r\n    getLocalidades() {\r\n        let subject = new Subject<any>();\r\n        this.http.get<any>(`${environment.localidades}`).pipe(\r\n            map((resp => resp))\r\n        ).subscribe((resp: any) => {\r\n            this._authService.accessToken = resp.token,\r\n                subject.next({\r\n                    list: resp.result\r\n                })\r\n        });\r\n        return subject.asObservable()\r\n    }\r\n\r\n    getTratamiendos() {\r\n        let subject = new Subject<any>();\r\n        this.http.get<any>(`${environment.administracion.select_tratamientos}`).pipe(\r\n            map((resp => resp))\r\n        ).subscribe((resp: any) => {\r\n            this._authService.accessToken = resp.token,\r\n                subject.next({\r\n                    list: resp.result\r\n                })\r\n        });\r\n        return subject.asObservable()\r\n    }\r\n\r\n    calcularPrecioUnitario(payload: dtoCalcularUnitario) {\r\n        return this.http.post<any>(`${environment.ventas.vta_venta_calcular_unitario}`, payload);\r\n    }\r\n\r\n    calcularItem(payload: dtoCalcularItem) {\r\n        return this.http.post<any>(`${environment.ventas.vta_venta_calcular_item}`, payload);\r\n    }\r\n}","import { RouterModule, Routes } from '@angular/router';\r\nimport { CommonModule, DatePipe } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { MatToolbarModule } from '@angular/material/toolbar'\r\nimport { MatTableModule } from '@angular/material/table';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { FuseAlertComponent } from '@fuse/components/alert';\r\nimport { JedsMenuService } from '@shared/service/app/jeds-menu.service';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { AppAlertService } from '@shared/service/app/alert.service';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\nimport { MatAutocompleteModule } from '@angular/material/autocomplete';\r\nimport { MatCheckboxModule } from '@angular/material/checkbox';\r\nimport { MatSortModule } from '@angular/material/sort';\r\nimport { TablaDinamicaModule } from '@shared/components/tabla-dinamica/tabla-dinamica.module';\r\nimport { MatDialogModule } from '@angular/material/dialog';\r\nimport { MatDatepickerModule } from '@angular/material/datepicker';\r\nimport { VentaGenericasService } from './service/venta-generica.service';\r\nimport { VentaGenericasComponent } from './components/venta-genericas.component';\r\nimport { AltaEdicionVentaComponent } from './components/alta-edicion/alta-edicion.component';\r\nimport { CalcularUnitarioComponent } from './components/calcular-unitario/calcular-unitario.component';\r\nimport { ClientesService } from 'app/modules/administracion/clientes/service/clientes.service';\r\nconst routes: Routes = [\r\n    {\r\n        path: '',\r\n        component: VentaGenericasComponent\r\n    },\r\n    {\r\n        path: 'alta',\r\n        component: AltaEdicionVentaComponent\r\n    },\r\n    {\r\n        path: 'edicion/:idventa',\r\n        component: AltaEdicionVentaComponent\r\n    }\r\n];\r\n@NgModule({\r\n    declarations: [VentaGenericasComponent, AltaEdicionVentaComponent, CalcularUnitarioComponent],\r\n    imports: [\r\n        CommonModule,\r\n        RouterModule.forChild(routes),\r\n        MatTableModule,\r\n        MatButtonModule,\r\n        MatSelectModule,\r\n        MatFormFieldModule,\r\n        ReactiveFormsModule,\r\n        MatInputModule,\r\n        MatIconModule,\r\n        FuseAlertComponent,\r\n        MatTooltipModule,\r\n        MatAutocompleteModule,\r\n        MatToolbarModule,\r\n        MatCheckboxModule,\r\n        MatSortModule,\r\n        TablaDinamicaModule,\r\n        MatDialogModule,\r\n        MatDatepickerModule\r\n    ],\r\n    exports: [RouterModule],\r\n    providers: [VentaGenericasService, JedsMenuService, AppAlertService, DatePipe, ClientesService]\r\n})\r\nexport class VentaGenericasModule { }"],"names":["EventEmitter","debounceTime","distinctUntilChanged","finalize","firstValueFrom","map","startWith","Subject","switchMap","takeUntil","takeWhile","tap","timer","FormControl","FormGroup","Validators","TablaDinamicaComponent","MatTableDataSource","MAT_DATE_FORMATS","MY_DATE_FORMATS","CalcularUnitarioComponent","environment","SaveComponent","i0","element","elementStart","text","elementEnd","property","ctx_r1","_alertConfig","type","showAlert","advance","textInterpolate1","message","listener","AltaEdicionVentaComponent_mat_option_26_Template_mat_option_click_0_listener","$event","restoreView","_r26","ctx_r25","nextContext","resetView","seleccionItem","cliente_r24","descripcion","AltaEdicionVentaComponent_button_28_Template_button_click_0_listener","_r28","ctx_r27","limpiarCasillero","AltaEdicionVentaComponent_mat_option_40_Template_mat_option_click_0_listener","_r31","ctx_r30","vendedor_r29","textInterpolate2","nombre","apellido","AltaEdicionVentaComponent_button_42_Template_button_click_0_listener","_r33","ctx_r32","AltaEdicionVentaComponent_form_43_button_6_Template_button_click_0_listener","_r47","ctx_r46","AltaEdicionVentaComponent_form_43_button_11_Template_button_click_0_listener","_r49","ctx_r48","AltaEdicionVentaComponent_form_43_mat_option_19_Template_mat_option_click_0_listener","_r52","ctx_r51","localidad_r50","AltaEdicionVentaComponent_form_43_button_21_Template_button_click_0_listener","_r54","ctx_r53","AltaEdicionVentaComponent_form_43_mat_option_30_Template_mat_option_click_0_listener","_r57","ctx_r56","tratamiento_r55","AltaEdicionVentaComponent_form_43_button_32_Template_button_click_0_listener","_r59","ctx_r58","AltaEdicionVentaComponent_form_43_Template_input_keydown_enter_5_listener","_r61","ctx_r60","template","AltaEdicionVentaComponent_form_43_button_6_Template","AltaEdicionVentaComponent_form_43_Template_input_keydown_enter_10_listener","ctx_r62","AltaEdicionVentaComponent_form_43_button_11_Template","AltaEdicionVentaComponent_form_43_Template_input_keydown_enter_15_listener","ctx_r63","AltaEdicionVentaComponent_form_43_button_16_Template","AltaEdicionVentaComponent_form_43_mat_option_19_Template","AltaEdicionVentaComponent_form_43_button_21_Template","AltaEdicionVentaComponent_form_43_Template_input_keydown_enter_26_listener","ctx_r64","AltaEdicionVentaComponent_form_43_button_27_Template","AltaEdicionVentaComponent_form_43_mat_option_30_Template","AltaEdicionVentaComponent_form_43_button_32_Template","ctx_r11","form_obra","get","value","_r37","getTextGenerico","pipeBind1","filteredLocalidades","_r41","filteredTratamientos","_r44","maxDate","_r45","AltaEdicionVentaComponent_small_51_Template_small_click_0_listener","_r66","_r12","reference","click","textInterpolate","imagen_r68","path","ctx_r69","getFileSize","size","propertyInterpolate","ctx_r70","urlBase","sanitizeUrl","getFileNameFromUrl","elementContainerStart","AltaEdicionVentaComponent_div_52_ng_container_1_span_2_Template","AltaEdicionVentaComponent_div_52_ng_container_1_a_3_Template","AltaEdicionVentaComponent_div_52_ng_container_1_Template_button_click_4_listener","restoredCtx","_r74","$implicit","ctx_r73","removeFile","elementContainerEnd","classMap","ctx_r67","color_primario","default_color","styleProp","idventaadjunto","AltaEdicionVentaComponent_div_52_ng_container_1_Template","ctx_r14","adjuntos","articulo_r75","codigo_interno","AltaEdicionVentaComponent_button_63_Template_button_click_0_listener","_r77","ctx_r76","um_r78","factor_um","um_base","AltaEdicionVentaComponent_mat_option_68_i_2_Template","idarticulounidadmedida","descripcion_um","AltaEdicionVentaComponent_button_73_Template_button_click_0_listener","_r82","ctx_r81","AltaEdicionVentaComponent_button_84_Template_button_click_0_listener","_r84","ctx_r83","AltaEdicionVentaComponent_button_97_Template_button_click_0_listener","_r86","ctx_r85","ctx_r87","item_r117","ctx_r90","item_r118","ctx_r93","item_r119","cantidad","ctx_r96","item_r120","importe_unitario","ctx_r99","item_r121","importe_bonificado","porcentaje_bonificado","ctx_r101","totales","ctx_r102","item_r122","importe_no_bonificado","ctx_r104","ctx_r105","item_r123","importe_iva","ctx_r107","ctx_r108","item_r124","importe_subtotal","ctx_r110","ctx_r111","AltaEdicionVentaComponent_table_109_td_35_Template_button_click_1_listener","_r128","movimiento_r125","ctx_r127","deleteMovimiento","AltaEdicionVentaComponent_table_109_th_2_Template","AltaEdicionVentaComponent_table_109_td_3_Template","AltaEdicionVentaComponent_table_109_td_4_Template","AltaEdicionVentaComponent_table_109_th_6_Template","AltaEdicionVentaComponent_table_109_td_7_Template","AltaEdicionVentaComponent_table_109_td_8_Template","AltaEdicionVentaComponent_table_109_th_10_Template","AltaEdicionVentaComponent_table_109_td_11_Template","AltaEdicionVentaComponent_table_109_td_12_Template","AltaEdicionVentaComponent_table_109_th_14_Template","AltaEdicionVentaComponent_table_109_td_15_Template","AltaEdicionVentaComponent_table_109_td_16_Template","AltaEdicionVentaComponent_table_109_th_18_Template","AltaEdicionVentaComponent_table_109_td_19_Template","AltaEdicionVentaComponent_table_109_td_20_Template","AltaEdicionVentaComponent_table_109_th_22_Template","AltaEdicionVentaComponent_table_109_td_23_Template","AltaEdicionVentaComponent_table_109_td_24_Template","AltaEdicionVentaComponent_table_109_th_26_Template","AltaEdicionVentaComponent_table_109_td_27_Template","AltaEdicionVentaComponent_table_109_td_28_Template","AltaEdicionVentaComponent_table_109_th_30_Template","AltaEdicionVentaComponent_table_109_td_31_Template","AltaEdicionVentaComponent_table_109_td_32_Template","AltaEdicionVentaComponent_table_109_th_34_Template","AltaEdicionVentaComponent_table_109_td_35_Template","AltaEdicionVentaComponent_table_109_td_36_Template","AltaEdicionVentaComponent_table_109_tr_37_Template","AltaEdicionVentaComponent_table_109_tr_38_Template","AltaEdicionVentaComponent_table_109_tr_39_Template","ctx_r22","dataSource","columns","AltaEdicionVentaComponent","constructor","_empresaService","_ventaGenericasService","_headerTextService","alert","dialogo","datePipe","dialogRef","router","route","_unsubscribeAll","maxPalabras","deposito_default","mostrarSpinner","mostrar_mensaje","creadoExitosamente","editadoExitosamente","articulos_list","unidades_de_medida","lista_de_articulos","funcionesObjeto","extraParams","importe_desuento","filtroBusqueda","filter","tipo","rubro","validExtension","selectedFiles","adjunto","selectedOption","esEdicion","snapshot","paramMap","idventa","Number","baseRest","titulo","custom_title","setCustomTitle","user","JSON","parse","localStorage","getItem","empresa$","pipe","subscribe","empresa","color_secundario","configura_obra","minDate","Date","subscribeAlert","emitConfig","next","config","appearance","time","ngOnInit","getEmpresa","newForm","loadServices","form_carga_articulos","valueChanges","idarticulo","filterLike","getArticulos","response","filteredArticulos","list","form","porcentaje_descuento_efectivo","updateDescuento","fecha","transform","required","cliente","maxLength","vendedor","total_venta","disabled","descripcion_obra","direccion_obra","localidad","tratamiento","colocacion","acarreo","fecha_entrega","fecha_medicion","articulo","unidadmedida","detalle","min","updateFormValidators","volverPaginaAnterior","navigate","ngOnDestroy","cambio_de_foco","redirect_control","enable","getUnidadesDeMedidaArticulos","setTimeout","cantidadField","document","querySelector","focus","KeyboardEvent","preventDefault","input","setValue","disable","onCargar","key","warning","valid","error","existe_articulo_en_grilla","find","item","precio_unitario","addMovimiento","reset","articuloField","onSubmit","base64","importe_total","fecha_venta_formateada","fecha_medicion_formateada","fecha_entrega_formateada","obra","direccion","idlocalidad","parseInt","id","idtratamiento","payload","venta","idcliente","idusuario","codigo","toString","porcentaje_descuento","importe_descuento","items","updateVenta","data","emit","saveVenta","calcularPrecioUnitario","articuloSeleccionado","open","panelClass","afterClosed","result","success","console","cargarNuevoCliente","getClientes","_this","_asyncToGenerator","ItemVenta","calcularItem","item_venta","updateTotal","_this2","Promise","all","getVendedores","getLocalidades","resolve","getTratamientos","getDatosVenta","then","_this3","Venta","_ref","patchValue","descripcion_cliente","descripcion_usuario","total","descripcion_localidad","descripcion_tratamiento","_x","apply","arguments","option","_this4","Clientes","_ref2","clientes","filteredClientes","_filterSelect","_x2","_this5","Localidades","_ref3","localidades","_x3","_this6","Tratamientos","getTratamiendos","_ref4","tratamientos","_x4","_this7","Vendedores","_ref5","vendedores","filteredVendedores","_filterVendodres","_x5","_this8","articulos","_ref6","_filterArticulos","_x6","_this9","unidadesDeMedida","_ref7","sort","a","b","factor","unidad","parseFloat","um","idunidadmedida","length","_x7","filterValue","toLowerCase","includes","model","RazonSocial","razonSocial","nick","getTextArticulo","setValidators","clearValidators","updateValueAndValidity","reduce","sum","subtotal","toFixed","emitEvent","calcularDescuento","nuevoTotal","descuento","applyFilter","trim","onBlurInput","target","valor","setImagen","tipo_imagen","imagen_data","files","Math","round","nombre_archivo","name","extension_archivo","split","pop","getBase64","imagen_en_base_64","info","extension","file","reject","reader","FileReader","readAsDataURL","onload","onerror","url","parts","fileName","bytes","kilobytes","megabytes","getFileTitle","directiveInject","i1","EmpresaService","i2","VentaGenericasService","i3","HeaderTextService","i4","AppAlertService","i5","MatDialog","i6","DatePipe","MatDialogRef","i7","Router","ActivatedRoute","selectors","viewQuery","AltaEdicionVentaComponent_Query","rf","ctx","provide","useValue","decls","vars","consts","template","AltaEdicionVentaComponent_Template","AltaEdicionVentaComponent_Template_button_click_2_listener","AltaEdicionVentaComponent_spinner_component_6_Template","AltaEdicionVentaComponent_fuse_alert_7_Template","AltaEdicionVentaComponent_Template_input_keydown_enter_22_listener","AltaEdicionVentaComponent_button_23_Template","AltaEdicionVentaComponent_mat_option_26_Template","AltaEdicionVentaComponent_button_28_Template","AltaEdicionVentaComponent_Template_button_click_30_listener","namespaceSVG","namespaceHTML","AltaEdicionVentaComponent_Template_input_keydown_enter_36_listener","AltaEdicionVentaComponent_button_37_Template","AltaEdicionVentaComponent_mat_option_40_Template","AltaEdicionVentaComponent_button_42_Template","AltaEdicionVentaComponent_form_43_Template","AltaEdicionVentaComponent_Template_button_click_46_listener","_r130","AltaEdicionVentaComponent_Template_input_change_49_listener","AltaEdicionVentaComponent_small_51_Template","AltaEdicionVentaComponent_div_52_Template","AltaEdicionVentaComponent_Template_input_ngModelChange_59_listener","AltaEdicionVentaComponent_mat_option_62_Template","AltaEdicionVentaComponent_button_63_Template","AltaEdicionVentaComponent_Template_mat_select_ngModelChange_67_listener","AltaEdicionVentaComponent_mat_option_68_Template","AltaEdicionVentaComponent_Template_input_keydown_enter_72_listener","AltaEdicionVentaComponent_button_73_Template","AltaEdicionVentaComponent_Template_mat_form_field_keydown_enter_74_listener","AltaEdicionVentaComponent_Template_input_keydown_enter_83_listener","AltaEdicionVentaComponent_button_84_Template","AltaEdicionVentaComponent_Template_button_click_88_listener","AltaEdicionVentaComponent_Template_input_keydown_enter_96_listener","AltaEdicionVentaComponent_button_97_Template","AltaEdicionVentaComponent_Template_button_click_99_listener","AltaEdicionVentaComponent_Template_input_keyup_104_listener","AltaEdicionVentaComponent_table_109_Template","AltaEdicionVentaComponent_div_110_Template","AltaEdicionVentaComponent_Template_mat_form_field_keydown_enter_113_listener","AltaEdicionVentaComponent_Template_input_blur_116_listener","AltaEdicionVentaComponent_Template_mat_form_field_keydown_enter_117_listener","AltaEdicionVentaComponent_Template_button_click_122_listener","_r2","_r4","_r8","_r15","MAT_DIALOG_DATA","ctx_r0","title","bruto","onCloseMenu","close","outputs","CalcularUnitarioComponent_Template","CalcularUnitarioComponent_Template_button_click_5_listener","CalcularUnitarioComponent_fuse_alert_8_Template","CalcularUnitarioComponent_Template_input_keydown_enter_17_listener","CalcularUnitarioComponent_Template_button_click_19_listener","VentaGenericasComponent","confirm","_searchService","pwaService","search","headers","column_params","selectedItems","filtersLike","deposito","filtroFechaInicio","filtroFechaFin","parametrosActualizados","env","ventas","view_vta_ventas","setTitulo","nombre_boton","functionName","iconoAccion","venta_generica","iconoAccionado","iconoDeshabilitado","SearchTextSub$","getSearchText","tabla","filters","FilterEventSub$","getFilterEvent","event","onFilterMenu","getFilterOrigin","params","deleteVenta","dismissible","actions","show","color","label","cancel","res","renderTabla","origin","generarAcciones","reporteOrdenServicio","onSelectionChange","selectedElements","idordenservicio","Object","keys","push","ordenes_de_servicio","element","reportePath","isPwa","reporteUrl","newWindow","window","location","href","unsubscribe","closeAll","FuseConfirmationService","SearchService","i8","i9","PwaService","VentaGenericasComponent_Query","VentaGenericasComponent_Template_button_click_3_listener","VentaGenericasComponent_Template_button_click_10_listener","VentaGenericasComponent_Template_app_tabla_dinamica_selectionChange_22_listener","VentaGenericasComponent_Template_app_tabla_dinamica_functionEmitter_22_listener","http","_authService","post","reporte_orden_servicio","vta_ventas","put","delete","subject","vta_venta_get_datos","resp","accessToken","token","asObservable","administracion","select_clientes","f","login","view_usuarios","stock","articulo_unidad_medidas","select_tratamientos","vta_venta_calcular_unitario","vta_venta_calcular_item","inject","HttpClient","AuthService","factory","fac","RouterModule","CommonModule","MatToolbarModule","MatTableModule","MatButtonModule","MatSelectModule","MatFormFieldModule","ReactiveFormsModule","MatInputModule","FuseAlertComponent","JedsMenuService","MatIconModule","MatTooltipModule","MatAutocompleteModule","MatCheckboxModule","MatSortModule","TablaDinamicaModule","MatDialogModule","MatDatepickerModule","ClientesService","routes","component","VentaGenericasModule","imports","forChild","declarations","exports"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}